var Cg=Object.defineProperty;var Sg=(t,e,n)=>e in t?Cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var z=(t,e,n)=>Sg(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Oh={exports:{}},yo={},Dh={exports:{}},j={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=Symbol.for("react.element"),Eg=Symbol.for("react.portal"),kg=Symbol.for("react.fragment"),xg=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),Ig=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),Og=Symbol.for("react.memo"),Dg=Symbol.for("react.lazy"),Nc=Symbol.iterator;function Ag(t){return t===null||typeof t!="object"?null:(t=Nc&&t[Nc]||t["@@iterator"],typeof t=="function"?t:null)}var Ah={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lh=Object.assign,Mh={};function yr(t,e,n){this.props=t,this.context=e,this.refs=Mh,this.updater=n||Ah}yr.prototype.isReactComponent={};yr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bh(){}bh.prototype=yr.prototype;function Ja(t,e,n){this.props=t,this.context=e,this.refs=Mh,this.updater=n||Ah}var Xa=Ja.prototype=new bh;Xa.constructor=Ja;Lh(Xa,yr.prototype);Xa.isPureReactComponent=!0;var Rc=Array.isArray,Fh=Object.prototype.hasOwnProperty,Za={current:null},jh={key:!0,ref:!0,__self:!0,__source:!0};function zh(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Fh.call(e,r)&&!jh.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Oi,type:t,key:s,ref:o,props:i,_owner:Za.current}}function Lg(t,e){return{$$typeof:Oi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oi}function Mg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pc=/\/+/g;function Xo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mg(""+t.key):e.toString(36)}function fs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Oi:case Eg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xo(o,0):r,Rc(i)?(n="",t!=null&&(n=t.replace(Pc,"$&/")+"/"),fs(i,e,n,"",function(u){return u})):i!=null&&(eu(i)&&(i=Lg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Rc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Xo(s,l);o+=fs(s,e,n,a,i)}else if(a=Ag(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Xo(s,l++),o+=fs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ki(t,e,n){if(t==null)return t;var r=[],i=0;return fs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function bg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Le={current:null},ps={transition:null},Fg={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ps,ReactCurrentOwner:Za};function $h(){throw Error("act(...) is not supported in production builds of React.")}j.Children={map:Ki,forEach:function(t,e,n){Ki(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ki(t,function(){e++}),e},toArray:function(t){return Ki(t,function(e){return e})||[]},only:function(t){if(!eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};j.Component=yr;j.Fragment=kg;j.Profiler=Tg;j.PureComponent=Ja;j.StrictMode=xg;j.Suspense=Pg;j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fg;j.act=$h;j.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Lh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Za.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Fh.call(e,a)&&!jh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Oi,type:t.type,key:i,ref:s,props:r,_owner:o}};j.createContext=function(t){return t={$$typeof:Ng,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ig,_context:t},t.Consumer=t};j.createElement=zh;j.createFactory=function(t){var e=zh.bind(null,t);return e.type=t,e};j.createRef=function(){return{current:null}};j.forwardRef=function(t){return{$$typeof:Rg,render:t}};j.isValidElement=eu;j.lazy=function(t){return{$$typeof:Dg,_payload:{_status:-1,_result:t},_init:bg}};j.memo=function(t,e){return{$$typeof:Og,type:t,compare:e===void 0?null:e}};j.startTransition=function(t){var e=ps.transition;ps.transition={};try{t()}finally{ps.transition=e}};j.unstable_act=$h;j.useCallback=function(t,e){return Le.current.useCallback(t,e)};j.useContext=function(t){return Le.current.useContext(t)};j.useDebugValue=function(){};j.useDeferredValue=function(t){return Le.current.useDeferredValue(t)};j.useEffect=function(t,e){return Le.current.useEffect(t,e)};j.useId=function(){return Le.current.useId()};j.useImperativeHandle=function(t,e,n){return Le.current.useImperativeHandle(t,e,n)};j.useInsertionEffect=function(t,e){return Le.current.useInsertionEffect(t,e)};j.useLayoutEffect=function(t,e){return Le.current.useLayoutEffect(t,e)};j.useMemo=function(t,e){return Le.current.useMemo(t,e)};j.useReducer=function(t,e,n){return Le.current.useReducer(t,e,n)};j.useRef=function(t){return Le.current.useRef(t)};j.useState=function(t){return Le.current.useState(t)};j.useSyncExternalStore=function(t,e,n){return Le.current.useSyncExternalStore(t,e,n)};j.useTransition=function(){return Le.current.useTransition()};j.version="18.3.1";Dh.exports=j;var W=Dh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg=W,zg=Symbol.for("react.element"),$g=Symbol.for("react.fragment"),Ug=Object.prototype.hasOwnProperty,Bg=jg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wg={key:!0,ref:!0,__self:!0,__source:!0};function Uh(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ug.call(e,r)&&!Wg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zg,type:t,key:s,ref:o,props:i,_owner:Bg.current}}yo.Fragment=$g;yo.jsx=Uh;yo.jsxs=Uh;Oh.exports=yo;var p=Oh.exports,Bh={exports:{}},Ge={},Wh={exports:{}},Hh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,D){var L=N.length;N.push(D);e:for(;0<L;){var oe=L-1>>>1,fe=N[oe];if(0<i(fe,D))N[oe]=D,N[L]=fe,L=oe;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var D=N[0],L=N.pop();if(L!==D){N[0]=L;e:for(var oe=0,fe=N.length,Gi=fe>>>1;oe<Gi;){var cn=2*(oe+1)-1,Jo=N[cn],dn=cn+1,Qi=N[dn];if(0>i(Jo,L))dn<fe&&0>i(Qi,Jo)?(N[oe]=Qi,N[dn]=L,oe=dn):(N[oe]=Jo,N[cn]=L,oe=cn);else if(dn<fe&&0>i(Qi,L))N[oe]=Qi,N[dn]=L,oe=dn;else break e}}return D}function i(N,D){var L=N.sortIndex-D.sortIndex;return L!==0?L:N.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,f=3,y=!1,_=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(N){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=N)r(u),D.sortIndex=D.expirationTime,e(a,D);else break;D=n(u)}}function w(N){if(v=!1,g(N),!_)if(n(a)!==null)_=!0,Yo(S);else{var D=n(u);D!==null&&qo(w,D.startTime-N)}}function S(N,D){_=!1,v&&(v=!1,m(R),R=-1),y=!0;var L=f;try{for(g(D),d=n(a);d!==null&&(!(d.expirationTime>D)||N&&!_e());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,f=d.priorityLevel;var fe=oe(d.expirationTime<=D);D=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(a)&&r(a),g(D)}else r(a);d=n(a)}if(d!==null)var Gi=!0;else{var cn=n(u);cn!==null&&qo(w,cn.startTime-D),Gi=!1}return Gi}finally{d=null,f=L,y=!1}}var T=!1,x=null,R=-1,G=5,P=-1;function _e(){return!(t.unstable_now()-P<G)}function _t(){if(x!==null){var N=t.unstable_now();P=N;var D=!0;try{D=x(!0,N)}finally{D?vt():(T=!1,x=null)}}else T=!1}var vt;if(typeof c=="function")vt=function(){c(_t)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,wg=ve.port2;ve.port1.onmessage=_t,vt=function(){wg.postMessage(null)}}else vt=function(){k(_t,0)};function Yo(N){x=N,T||(T=!0,vt())}function qo(N,D){R=k(function(){N(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,Yo(S))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var L=f;f=D;try{return N()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,D){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=f;f=N;try{return D()}finally{f=L}},t.unstable_scheduleCallback=function(N,D,L){var oe=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?oe+L:oe):L=oe,N){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=L+fe,N={id:h++,callback:D,priorityLevel:N,startTime:L,expirationTime:fe,sortIndex:-1},L>oe?(N.sortIndex=L,e(u,N),n(a)===null&&N===n(u)&&(v?(m(R),R=-1):v=!0,qo(w,L-oe))):(N.sortIndex=fe,e(a,N),_||y||(_=!0,Yo(S))),N},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(N){var D=f;return function(){var L=f;f=D;try{return N.apply(this,arguments)}finally{f=L}}}})(Hh);Wh.exports=Hh;var Hg=Wh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=W,Ve=Hg;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vh=new Set,ti={};function Pn(t,e){ir(t,e),ir(t+"Capture",e)}function ir(t,e){for(ti[t]=e,t=0;t<e.length;t++)Vh.add(e[t])}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=Object.prototype.hasOwnProperty,Gg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oc={},Dc={};function Qg(t){return Ml.call(Dc,t)?!0:Ml.call(Oc,t)?!1:Gg.test(t)?Dc[t]=!0:(Oc[t]=!0,!1)}function Kg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yg(t,e,n,r){if(e===null||typeof e>"u"||Kg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Me(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ke[t]=new Me(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ke[e]=new Me(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ke[t]=new Me(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ke[t]=new Me(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ke[t]=new Me(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ke[t]=new Me(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ke[t]=new Me(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ke[t]=new Me(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ke[t]=new Me(t,5,!1,t.toLowerCase(),null,!1,!1)});var tu=/[\-:]([a-z])/g;function nu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tu,nu);ke[e]=new Me(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tu,nu);ke[e]=new Me(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tu,nu);ke[e]=new Me(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ke[t]=new Me(t,1,!1,t.toLowerCase(),null,!1,!1)});ke.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ke[t]=new Me(t,1,!1,t.toLowerCase(),null,!0,!0)});function ru(t,e,n,r){var i=ke.hasOwnProperty(e)?ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yg(e,n,i,r)&&(n=null),r||i===null?Qg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var At=Vg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yi=Symbol.for("react.element"),bn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),iu=Symbol.for("react.strict_mode"),bl=Symbol.for("react.profiler"),Gh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),su=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),jl=Symbol.for("react.suspense_list"),ou=Symbol.for("react.memo"),bt=Symbol.for("react.lazy"),Kh=Symbol.for("react.offscreen"),Ac=Symbol.iterator;function xr(t){return t===null||typeof t!="object"?null:(t=Ac&&t[Ac]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,Zo;function Fr(t){if(Zo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zo=e&&e[1]||""}return`
`+Zo+t}var el=!1;function tl(t,e){if(!t||el)return"";el=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{el=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fr(t):""}function qg(t){switch(t.tag){case 5:return Fr(t.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 2:case 15:return t=tl(t.type,!1),t;case 11:return t=tl(t.type.render,!1),t;case 1:return t=tl(t.type,!0),t;default:return""}}function zl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fn:return"Fragment";case bn:return"Portal";case bl:return"Profiler";case iu:return"StrictMode";case Fl:return"Suspense";case jl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qh:return(t.displayName||"Context")+".Consumer";case Gh:return(t._context.displayName||"Context")+".Provider";case su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ou:return e=t.displayName||null,e!==null?e:zl(t.type)||"Memo";case bt:e=t._payload,t=t._init;try{return zl(t(e))}catch{}}return null}function Jg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zl(e);case 8:return e===iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xg(t){var e=Yh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qi(t){t._valueTracker||(t._valueTracker=Xg(t))}function qh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $l(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jh(t,e){e=e.checked,e!=null&&ru(t,"checked",e,!1)}function Ul(t,e){Jh(t,e);var n=tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bl(t,e.type,tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bl(t,e,n){(e!=="number"||Ts(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jr=Array.isArray;function Yn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(jr(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tn(n)}}function Xh(t,e){var n=tn(e.value),r=tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ji,ef=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ji=Ji||document.createElement("div"),Ji.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ji.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ni(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zg=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(t){Zg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ur[e]=Ur[t]})});function tf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ur.hasOwnProperty(t)&&Ur[t]?(""+e).trim():e+"px"}function nf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=tf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ey=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(t,e){if(e){if(ey[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function Gl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ql=null;function lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kl=null,qn=null,Jn=null;function jc(t){if(t=Li(t)){if(typeof Kl!="function")throw Error(C(280));var e=t.stateNode;e&&(e=So(e),Kl(t.stateNode,t.type,e))}}function rf(t){qn?Jn?Jn.push(t):Jn=[t]:qn=t}function sf(){if(qn){var t=qn,e=Jn;if(Jn=qn=null,jc(t),e)for(t=0;t<e.length;t++)jc(e[t])}}function of(t,e){return t(e)}function lf(){}var nl=!1;function af(t,e,n){if(nl)return t(e,n);nl=!0;try{return of(t,e,n)}finally{nl=!1,(qn!==null||Jn!==null)&&(lf(),sf())}}function ri(t,e){var n=t.stateNode;if(n===null)return null;var r=So(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var Yl=!1;if(It)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{Yl=!1}function ty(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Br=!1,Is=null,Ns=!1,ql=null,ny={onError:function(t){Br=!0,Is=t}};function ry(t,e,n,r,i,s,o,l,a){Br=!1,Is=null,ty.apply(ny,arguments)}function iy(t,e,n,r,i,s,o,l,a){if(ry.apply(this,arguments),Br){if(Br){var u=Is;Br=!1,Is=null}else throw Error(C(198));Ns||(Ns=!0,ql=u)}}function On(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zc(t){if(On(t)!==t)throw Error(C(188))}function sy(t){var e=t.alternate;if(!e){if(e=On(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zc(i),t;if(s===r)return zc(i),e;s=s.sibling}throw Error(C(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function cf(t){return t=sy(t),t!==null?df(t):null}function df(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=df(t);if(e!==null)return e;t=t.sibling}return null}var hf=Ve.unstable_scheduleCallback,$c=Ve.unstable_cancelCallback,oy=Ve.unstable_shouldYield,ly=Ve.unstable_requestPaint,le=Ve.unstable_now,ay=Ve.unstable_getCurrentPriorityLevel,au=Ve.unstable_ImmediatePriority,ff=Ve.unstable_UserBlockingPriority,Rs=Ve.unstable_NormalPriority,uy=Ve.unstable_LowPriority,pf=Ve.unstable_IdlePriority,_o=null,mt=null;function cy(t){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(_o,t,void 0,(t.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:fy,dy=Math.log,hy=Math.LN2;function fy(t){return t>>>=0,t===0?32:31-(dy(t)/hy|0)|0}var Xi=64,Zi=4194304;function zr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ps(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=zr(l):(s&=o,s!==0&&(r=zr(s)))}else o=n&~i,o!==0?r=zr(o):s!==0&&(r=zr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-at(e),i=1<<n,r|=t[n],e&=~i;return r}function py(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function my(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-at(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=py(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Jl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mf(){var t=Xi;return Xi<<=1,!(Xi&4194240)&&(Xi=64),t}function rl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Di(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-at(e),t[e]=n}function gy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-at(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-at(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function gf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yf,cu,_f,vf,wf,Xl=!1,es=[],Wt=null,Ht=null,Vt=null,ii=new Map,si=new Map,jt=[],yy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uc(t,e){switch(t){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Ht=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":si.delete(e.pointerId)}}function Ir(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Li(e),e!==null&&cu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _y(t,e,n,r,i){switch(e){case"focusin":return Wt=Ir(Wt,t,e,n,r,i),!0;case"dragenter":return Ht=Ir(Ht,t,e,n,r,i),!0;case"mouseover":return Vt=Ir(Vt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ii.set(s,Ir(ii.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,si.set(s,Ir(si.get(s)||null,t,e,n,r,i)),!0}return!1}function Cf(t){var e=gn(t.target);if(e!==null){var n=On(e);if(n!==null){if(e=n.tag,e===13){if(e=uf(n),e!==null){t.blockedOn=e,wf(t.priority,function(){_f(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ms(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ql=r,n.target.dispatchEvent(r),Ql=null}else return e=Li(n),e!==null&&cu(e),t.blockedOn=n,!1;e.shift()}return!0}function Bc(t,e,n){ms(t)&&n.delete(e)}function vy(){Xl=!1,Wt!==null&&ms(Wt)&&(Wt=null),Ht!==null&&ms(Ht)&&(Ht=null),Vt!==null&&ms(Vt)&&(Vt=null),ii.forEach(Bc),si.forEach(Bc)}function Nr(t,e){t.blockedOn===e&&(t.blockedOn=null,Xl||(Xl=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,vy)))}function oi(t){function e(i){return Nr(i,t)}if(0<es.length){Nr(es[0],t);for(var n=1;n<es.length;n++){var r=es[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wt!==null&&Nr(Wt,t),Ht!==null&&Nr(Ht,t),Vt!==null&&Nr(Vt,t),ii.forEach(e),si.forEach(e),n=0;n<jt.length;n++)r=jt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jt.length&&(n=jt[0],n.blockedOn===null);)Cf(n),n.blockedOn===null&&jt.shift()}var Xn=At.ReactCurrentBatchConfig,Os=!0;function wy(t,e,n,r){var i=H,s=Xn.transition;Xn.transition=null;try{H=1,du(t,e,n,r)}finally{H=i,Xn.transition=s}}function Cy(t,e,n,r){var i=H,s=Xn.transition;Xn.transition=null;try{H=4,du(t,e,n,r)}finally{H=i,Xn.transition=s}}function du(t,e,n,r){if(Os){var i=Zl(t,e,n,r);if(i===null)fl(t,e,r,Ds,n),Uc(t,r);else if(_y(i,t,e,n,r))r.stopPropagation();else if(Uc(t,r),e&4&&-1<yy.indexOf(t)){for(;i!==null;){var s=Li(i);if(s!==null&&yf(s),s=Zl(t,e,n,r),s===null&&fl(t,e,r,Ds,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fl(t,e,r,null,n)}}var Ds=null;function Zl(t,e,n,r){if(Ds=null,t=lu(r),t=gn(t),t!==null)if(e=On(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ds=t,null}function Sf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ay()){case au:return 1;case ff:return 4;case Rs:case uy:return 16;case pf:return 536870912;default:return 16}default:return 16}}var $t=null,hu=null,gs=null;function Ef(){if(gs)return gs;var t,e=hu,n=e.length,r,i="value"in $t?$t.value:$t.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gs=i.slice(t,1<r?1-r:void 0)}function ys(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ts(){return!0}function Wc(){return!1}function Qe(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ts:Wc,this.isPropagationStopped=Wc,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),e}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=Qe(_r),Ai=ne({},_r,{view:0,detail:0}),Sy=Qe(Ai),il,sl,Rr,vo=ne({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rr&&(Rr&&t.type==="mousemove"?(il=t.screenX-Rr.screenX,sl=t.screenY-Rr.screenY):sl=il=0,Rr=t),il)},movementY:function(t){return"movementY"in t?t.movementY:sl}}),Hc=Qe(vo),Ey=ne({},vo,{dataTransfer:0}),ky=Qe(Ey),xy=ne({},Ai,{relatedTarget:0}),ol=Qe(xy),Ty=ne({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),Iy=Qe(Ty),Ny=ne({},_r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ry=Qe(Ny),Py=ne({},_r,{data:0}),Vc=Qe(Py),Oy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ly(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ay[t])?!!e[t]:!1}function pu(){return Ly}var My=ne({},Ai,{key:function(t){if(t.key){var e=Oy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(t){return t.type==="keypress"?ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),by=Qe(My),Fy=ne({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gc=Qe(Fy),jy=ne({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),zy=Qe(jy),$y=ne({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uy=Qe($y),By=ne({},vo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wy=Qe(By),Hy=[9,13,27,32],mu=It&&"CompositionEvent"in window,Wr=null;It&&"documentMode"in document&&(Wr=document.documentMode);var Vy=It&&"TextEvent"in window&&!Wr,kf=It&&(!mu||Wr&&8<Wr&&11>=Wr),Qc=" ",Kc=!1;function xf(t,e){switch(t){case"keyup":return Hy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function Gy(t,e){switch(t){case"compositionend":return Tf(e);case"keypress":return e.which!==32?null:(Kc=!0,Qc);case"textInput":return t=e.data,t===Qc&&Kc?null:t;default:return null}}function Qy(t,e){if(jn)return t==="compositionend"||!mu&&xf(t,e)?(t=Ef(),gs=hu=$t=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kf&&e.locale!=="ko"?null:e.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ky[t.type]:e==="textarea"}function If(t,e,n,r){rf(r),e=As(e,"onChange"),0<e.length&&(n=new fu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hr=null,li=null;function Yy(t){jf(t,0)}function wo(t){var e=Un(t);if(qh(e))return t}function qy(t,e){if(t==="change")return e}var Nf=!1;if(It){var ll;if(It){var al="oninput"in document;if(!al){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),al=typeof qc.oninput=="function"}ll=al}else ll=!1;Nf=ll&&(!document.documentMode||9<document.documentMode)}function Jc(){Hr&&(Hr.detachEvent("onpropertychange",Rf),li=Hr=null)}function Rf(t){if(t.propertyName==="value"&&wo(li)){var e=[];If(e,li,t,lu(t)),af(Yy,e)}}function Jy(t,e,n){t==="focusin"?(Jc(),Hr=e,li=n,Hr.attachEvent("onpropertychange",Rf)):t==="focusout"&&Jc()}function Xy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wo(li)}function Zy(t,e){if(t==="click")return wo(e)}function e_(t,e){if(t==="input"||t==="change")return wo(e)}function t_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dt=typeof Object.is=="function"?Object.is:t_;function ai(t,e){if(dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ml.call(e,i)||!dt(t[i],e[i]))return!1}return!0}function Xc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zc(t,e){var n=Xc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xc(n)}}function Pf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Of(){for(var t=window,e=Ts();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ts(t.document)}return e}function gu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function n_(t){var e=Of(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pf(n.ownerDocument.documentElement,n)){if(r!==null&&gu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zc(n,s);var o=Zc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var r_=It&&"documentMode"in document&&11>=document.documentMode,zn=null,ea=null,Vr=null,ta=!1;function ed(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ta||zn==null||zn!==Ts(r)||(r=zn,"selectionStart"in r&&gu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vr&&ai(Vr,r)||(Vr=r,r=As(ea,"onSelect"),0<r.length&&(e=new fu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zn)))}function ns(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $n={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionend:ns("Transition","TransitionEnd")},ul={},Df={};It&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);function Co(t){if(ul[t])return ul[t];if(!$n[t])return t;var e=$n[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Df)return ul[t]=e[n];return t}var Af=Co("animationend"),Lf=Co("animationiteration"),Mf=Co("animationstart"),bf=Co("transitionend"),Ff=new Map,td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(t,e){Ff.set(t,e),Pn(e,[t])}for(var cl=0;cl<td.length;cl++){var dl=td[cl],i_=dl.toLowerCase(),s_=dl[0].toUpperCase()+dl.slice(1);ln(i_,"on"+s_)}ln(Af,"onAnimationEnd");ln(Lf,"onAnimationIteration");ln(Mf,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(bf,"onTransitionEnd");ir("onMouseEnter",["mouseout","mouseover"]);ir("onMouseLeave",["mouseout","mouseover"]);ir("onPointerEnter",["pointerout","pointerover"]);ir("onPointerLeave",["pointerout","pointerover"]);Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o_=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function nd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iy(r,e,void 0,t),t.currentTarget=null}function jf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;nd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;nd(i,l,u),s=a}}}if(Ns)throw t=ql,Ns=!1,ql=null,t}function J(t,e){var n=e[oa];n===void 0&&(n=e[oa]=new Set);var r=t+"__bubble";n.has(r)||(zf(e,t,2,!1),n.add(r))}function hl(t,e,n){var r=0;e&&(r|=4),zf(n,t,r,e)}var rs="_reactListening"+Math.random().toString(36).slice(2);function ui(t){if(!t[rs]){t[rs]=!0,Vh.forEach(function(n){n!=="selectionchange"&&(o_.has(n)||hl(n,!1,t),hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rs]||(e[rs]=!0,hl("selectionchange",!1,e))}}function zf(t,e,n,r){switch(Sf(e)){case 1:var i=wy;break;case 4:i=Cy;break;default:i=du}n=i.bind(null,e,n,t),i=void 0,!Yl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=gn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}af(function(){var u=s,h=lu(n),d=[];e:{var f=Ff.get(t);if(f!==void 0){var y=fu,_=t;switch(t){case"keypress":if(ys(n)===0)break e;case"keydown":case"keyup":y=by;break;case"focusin":_="focus",y=ol;break;case"focusout":_="blur",y=ol;break;case"beforeblur":case"afterblur":y=ol;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=zy;break;case Af:case Lf:case Mf:y=Iy;break;case bf:y=Uy;break;case"scroll":y=Sy;break;case"wheel":y=Wy;break;case"copy":case"cut":case"paste":y=Ry;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Gc}var v=(e&4)!==0,k=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var c=u,g;c!==null;){g=c;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,m!==null&&(w=ri(c,m),w!=null&&v.push(ci(c,w,g)))),k)break;c=c.return}0<v.length&&(f=new y(f,_,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==Ql&&(_=n.relatedTarget||n.fromElement)&&(gn(_)||_[Nt]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=u,_=_?gn(_):null,_!==null&&(k=On(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=u),y!==_)){if(v=Hc,w="onMouseLeave",m="onMouseEnter",c="mouse",(t==="pointerout"||t==="pointerover")&&(v=Gc,w="onPointerLeave",m="onPointerEnter",c="pointer"),k=y==null?f:Un(y),g=_==null?f:Un(_),f=new v(w,c+"leave",y,n,h),f.target=k,f.relatedTarget=g,w=null,gn(h)===u&&(v=new v(m,c+"enter",_,n,h),v.target=g,v.relatedTarget=k,w=v),k=w,y&&_)t:{for(v=y,m=_,c=0,g=v;g;g=Ln(g))c++;for(g=0,w=m;w;w=Ln(w))g++;for(;0<c-g;)v=Ln(v),c--;for(;0<g-c;)m=Ln(m),g--;for(;c--;){if(v===m||m!==null&&v===m.alternate)break t;v=Ln(v),m=Ln(m)}v=null}else v=null;y!==null&&rd(d,f,y,v,!1),_!==null&&k!==null&&rd(d,k,_,v,!0)}}e:{if(f=u?Un(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var S=qy;else if(Yc(f))if(Nf)S=e_;else{S=Xy;var T=Jy}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Zy);if(S&&(S=S(t,u))){If(d,S,n,h);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Bl(f,"number",f.value)}switch(T=u?Un(u):window,t){case"focusin":(Yc(T)||T.contentEditable==="true")&&(zn=T,ea=u,Vr=null);break;case"focusout":Vr=ea=zn=null;break;case"mousedown":ta=!0;break;case"contextmenu":case"mouseup":case"dragend":ta=!1,ed(d,n,h);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":ed(d,n,h)}var x;if(mu)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else jn?xf(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(kf&&n.locale!=="ko"&&(jn||R!=="onCompositionStart"?R==="onCompositionEnd"&&jn&&(x=Ef()):($t=h,hu="value"in $t?$t.value:$t.textContent,jn=!0)),T=As(u,R),0<T.length&&(R=new Vc(R,t,null,n,h),d.push({event:R,listeners:T}),x?R.data=x:(x=Tf(n),x!==null&&(R.data=x)))),(x=Vy?Gy(t,n):Qy(t,n))&&(u=As(u,"onBeforeInput"),0<u.length&&(h=new Vc("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=x))}jf(d,e)})}function ci(t,e,n){return{instance:t,listener:e,currentTarget:n}}function As(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ri(t,n),s!=null&&r.unshift(ci(t,s,i)),s=ri(t,e),s!=null&&r.push(ci(t,s,i))),t=t.return}return r}function Ln(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ri(n,s),a!=null&&o.unshift(ci(n,a,l))):i||(a=ri(n,s),a!=null&&o.push(ci(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var l_=/\r\n?/g,a_=/\u0000|\uFFFD/g;function id(t){return(typeof t=="string"?t:""+t).replace(l_,`
`).replace(a_,"")}function is(t,e,n){if(e=id(e),id(t)!==e&&n)throw Error(C(425))}function Ls(){}var na=null,ra=null;function ia(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sa=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,c_=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(t){return sd.resolve(null).then(t).catch(d_)}:sa;function d_(t){setTimeout(function(){throw t})}function pl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),oi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oi(e)}function Gt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function od(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vr=Math.random().toString(36).slice(2),pt="__reactFiber$"+vr,di="__reactProps$"+vr,Nt="__reactContainer$"+vr,oa="__reactEvents$"+vr,h_="__reactListeners$"+vr,f_="__reactHandles$"+vr;function gn(t){var e=t[pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nt]||n[pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=od(t);t!==null;){if(n=t[pt])return n;t=od(t)}return e}t=n,n=t.parentNode}return null}function Li(t){return t=t[pt]||t[Nt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Un(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function So(t){return t[di]||null}var la=[],Bn=-1;function an(t){return{current:t}}function X(t){0>Bn||(t.current=la[Bn],la[Bn]=null,Bn--)}function q(t,e){Bn++,la[Bn]=t.current,t.current=e}var nn={},Re=an(nn),ze=an(!1),Sn=nn;function sr(t,e){var n=t.type.contextTypes;if(!n)return nn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $e(t){return t=t.childContextTypes,t!=null}function Ms(){X(ze),X(Re)}function ld(t,e,n){if(Re.current!==nn)throw Error(C(168));q(Re,e),q(ze,n)}function $f(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(C(108,Jg(t)||"Unknown",i));return ne({},n,r)}function bs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nn,Sn=Re.current,q(Re,t),q(ze,ze.current),!0}function ad(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=$f(t,e,Sn),r.__reactInternalMemoizedMergedChildContext=t,X(ze),X(Re),q(Re,t)):X(ze),q(ze,n)}var Ct=null,Eo=!1,ml=!1;function Uf(t){Ct===null?Ct=[t]:Ct.push(t)}function p_(t){Eo=!0,Uf(t)}function un(){if(!ml&&Ct!==null){ml=!0;var t=0,e=H;try{var n=Ct;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ct=null,Eo=!1}catch(i){throw Ct!==null&&(Ct=Ct.slice(t+1)),hf(au,un),i}finally{H=e,ml=!1}}return null}var Wn=[],Hn=0,Fs=null,js=0,Ke=[],Ye=0,En=null,St=1,Et="";function hn(t,e){Wn[Hn++]=js,Wn[Hn++]=Fs,Fs=t,js=e}function Bf(t,e,n){Ke[Ye++]=St,Ke[Ye++]=Et,Ke[Ye++]=En,En=t;var r=St;t=Et;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,St=1<<32-at(e)+i|n<<i|r,Et=s+t}else St=1<<s|n<<i|r,Et=t}function yu(t){t.return!==null&&(hn(t,1),Bf(t,1,0))}function _u(t){for(;t===Fs;)Fs=Wn[--Hn],Wn[Hn]=null,js=Wn[--Hn],Wn[Hn]=null;for(;t===En;)En=Ke[--Ye],Ke[Ye]=null,Et=Ke[--Ye],Ke[Ye]=null,St=Ke[--Ye],Ke[Ye]=null}var He=null,We=null,Z=!1,st=null;function Wf(t,e){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ud(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,He=t,We=Gt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,He=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=En!==null?{id:St,overflow:Et}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,He=t,We=null,!0):!1;default:return!1}}function aa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ua(t){if(Z){var e=We;if(e){var n=e;if(!ud(t,e)){if(aa(t))throw Error(C(418));e=Gt(n.nextSibling);var r=He;e&&ud(t,e)?Wf(r,n):(t.flags=t.flags&-4097|2,Z=!1,He=t)}}else{if(aa(t))throw Error(C(418));t.flags=t.flags&-4097|2,Z=!1,He=t}}}function cd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;He=t}function ss(t){if(t!==He)return!1;if(!Z)return cd(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ia(t.type,t.memoizedProps)),e&&(e=We)){if(aa(t))throw Hf(),Error(C(418));for(;e;)Wf(t,e),e=Gt(e.nextSibling)}if(cd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){We=Gt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}We=null}}else We=He?Gt(t.stateNode.nextSibling):null;return!0}function Hf(){for(var t=We;t;)t=Gt(t.nextSibling)}function or(){We=He=null,Z=!1}function vu(t){st===null?st=[t]:st.push(t)}var m_=At.ReactCurrentBatchConfig;function Pr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function os(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dd(t){var e=t._init;return e(t._payload)}function Vf(t){function e(m,c){if(t){var g=m.deletions;g===null?(m.deletions=[c],m.flags|=16):g.push(c)}}function n(m,c){if(!t)return null;for(;c!==null;)e(m,c),c=c.sibling;return null}function r(m,c){for(m=new Map;c!==null;)c.key!==null?m.set(c.key,c):m.set(c.index,c),c=c.sibling;return m}function i(m,c){return m=qt(m,c),m.index=0,m.sibling=null,m}function s(m,c,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<c?(m.flags|=2,c):g):(m.flags|=2,c)):(m.flags|=1048576,c)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,c,g,w){return c===null||c.tag!==6?(c=Sl(g,m.mode,w),c.return=m,c):(c=i(c,g),c.return=m,c)}function a(m,c,g,w){var S=g.type;return S===Fn?h(m,c,g.props.children,w,g.key):c!==null&&(c.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bt&&dd(S)===c.type)?(w=i(c,g.props),w.ref=Pr(m,c,g),w.return=m,w):(w=ks(g.type,g.key,g.props,null,m.mode,w),w.ref=Pr(m,c,g),w.return=m,w)}function u(m,c,g,w){return c===null||c.tag!==4||c.stateNode.containerInfo!==g.containerInfo||c.stateNode.implementation!==g.implementation?(c=El(g,m.mode,w),c.return=m,c):(c=i(c,g.children||[]),c.return=m,c)}function h(m,c,g,w,S){return c===null||c.tag!==7?(c=Cn(g,m.mode,w,S),c.return=m,c):(c=i(c,g),c.return=m,c)}function d(m,c,g){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Sl(""+c,m.mode,g),c.return=m,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Yi:return g=ks(c.type,c.key,c.props,null,m.mode,g),g.ref=Pr(m,null,c),g.return=m,g;case bn:return c=El(c,m.mode,g),c.return=m,c;case bt:var w=c._init;return d(m,w(c._payload),g)}if(jr(c)||xr(c))return c=Cn(c,m.mode,g,null),c.return=m,c;os(m,c)}return null}function f(m,c,g,w){var S=c!==null?c.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:l(m,c,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yi:return g.key===S?a(m,c,g,w):null;case bn:return g.key===S?u(m,c,g,w):null;case bt:return S=g._init,f(m,c,S(g._payload),w)}if(jr(g)||xr(g))return S!==null?null:h(m,c,g,w,null);os(m,g)}return null}function y(m,c,g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(g)||null,l(c,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yi:return m=m.get(w.key===null?g:w.key)||null,a(c,m,w,S);case bn:return m=m.get(w.key===null?g:w.key)||null,u(c,m,w,S);case bt:var T=w._init;return y(m,c,g,T(w._payload),S)}if(jr(w)||xr(w))return m=m.get(g)||null,h(c,m,w,S,null);os(c,w)}return null}function _(m,c,g,w){for(var S=null,T=null,x=c,R=c=0,G=null;x!==null&&R<g.length;R++){x.index>R?(G=x,x=null):G=x.sibling;var P=f(m,x,g[R],w);if(P===null){x===null&&(x=G);break}t&&x&&P.alternate===null&&e(m,x),c=s(P,c,R),T===null?S=P:T.sibling=P,T=P,x=G}if(R===g.length)return n(m,x),Z&&hn(m,R),S;if(x===null){for(;R<g.length;R++)x=d(m,g[R],w),x!==null&&(c=s(x,c,R),T===null?S=x:T.sibling=x,T=x);return Z&&hn(m,R),S}for(x=r(m,x);R<g.length;R++)G=y(x,m,R,g[R],w),G!==null&&(t&&G.alternate!==null&&x.delete(G.key===null?R:G.key),c=s(G,c,R),T===null?S=G:T.sibling=G,T=G);return t&&x.forEach(function(_e){return e(m,_e)}),Z&&hn(m,R),S}function v(m,c,g,w){var S=xr(g);if(typeof S!="function")throw Error(C(150));if(g=S.call(g),g==null)throw Error(C(151));for(var T=S=null,x=c,R=c=0,G=null,P=g.next();x!==null&&!P.done;R++,P=g.next()){x.index>R?(G=x,x=null):G=x.sibling;var _e=f(m,x,P.value,w);if(_e===null){x===null&&(x=G);break}t&&x&&_e.alternate===null&&e(m,x),c=s(_e,c,R),T===null?S=_e:T.sibling=_e,T=_e,x=G}if(P.done)return n(m,x),Z&&hn(m,R),S;if(x===null){for(;!P.done;R++,P=g.next())P=d(m,P.value,w),P!==null&&(c=s(P,c,R),T===null?S=P:T.sibling=P,T=P);return Z&&hn(m,R),S}for(x=r(m,x);!P.done;R++,P=g.next())P=y(x,m,R,P.value,w),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?R:P.key),c=s(P,c,R),T===null?S=P:T.sibling=P,T=P);return t&&x.forEach(function(_t){return e(m,_t)}),Z&&hn(m,R),S}function k(m,c,g,w){if(typeof g=="object"&&g!==null&&g.type===Fn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Yi:e:{for(var S=g.key,T=c;T!==null;){if(T.key===S){if(S=g.type,S===Fn){if(T.tag===7){n(m,T.sibling),c=i(T,g.props.children),c.return=m,m=c;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bt&&dd(S)===T.type){n(m,T.sibling),c=i(T,g.props),c.ref=Pr(m,T,g),c.return=m,m=c;break e}n(m,T);break}else e(m,T);T=T.sibling}g.type===Fn?(c=Cn(g.props.children,m.mode,w,g.key),c.return=m,m=c):(w=ks(g.type,g.key,g.props,null,m.mode,w),w.ref=Pr(m,c,g),w.return=m,m=w)}return o(m);case bn:e:{for(T=g.key;c!==null;){if(c.key===T)if(c.tag===4&&c.stateNode.containerInfo===g.containerInfo&&c.stateNode.implementation===g.implementation){n(m,c.sibling),c=i(c,g.children||[]),c.return=m,m=c;break e}else{n(m,c);break}else e(m,c);c=c.sibling}c=El(g,m.mode,w),c.return=m,m=c}return o(m);case bt:return T=g._init,k(m,c,T(g._payload),w)}if(jr(g))return _(m,c,g,w);if(xr(g))return v(m,c,g,w);os(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,c!==null&&c.tag===6?(n(m,c.sibling),c=i(c,g),c.return=m,m=c):(n(m,c),c=Sl(g,m.mode,w),c.return=m,m=c),o(m)):n(m,c)}return k}var lr=Vf(!0),Gf=Vf(!1),zs=an(null),$s=null,Vn=null,wu=null;function Cu(){wu=Vn=$s=null}function Su(t){var e=zs.current;X(zs),t._currentValue=e}function ca(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zn(t,e){$s=t,wu=Vn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(wu!==t)if(t={context:t,memoizedValue:e,next:null},Vn===null){if($s===null)throw Error(C(308));Vn=t,$s.dependencies={lanes:0,firstContext:t}}else Vn=Vn.next=t;return e}var yn=null;function Eu(t){yn===null?yn=[t]:yn.push(t)}function Qf(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Eu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rt(t,r)}function Rt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ft=!1;function ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rt(t,n)}return i=r.interleaved,i===null?(e.next=e,Eu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rt(t,n)}function _s(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}function hd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Us(t,e,n,r){var i=t.updateQueue;Ft=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var f=l.lane,y=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,v=l;switch(f=e,y=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){d=_.call(y,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,f=typeof _=="function"?_.call(y,d,f):_,f==null)break e;d=ne({},d,f);break e;case 2:Ft=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,a=d):h=h.next=y,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xn|=o,t.lanes=o,t.memoizedState=d}}function fd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var Mi={},gt=an(Mi),hi=an(Mi),fi=an(Mi);function _n(t){if(t===Mi)throw Error(C(174));return t}function xu(t,e){switch(q(fi,e),q(hi,t),q(gt,Mi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hl(e,t)}X(gt),q(gt,e)}function ar(){X(gt),X(hi),X(fi)}function Yf(t){_n(fi.current);var e=_n(gt.current),n=Hl(e,t.type);e!==n&&(q(hi,t),q(gt,n))}function Tu(t){hi.current===t&&(X(gt),X(hi))}var ee=an(0);function Bs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gl=[];function Iu(){for(var t=0;t<gl.length;t++)gl[t]._workInProgressVersionPrimary=null;gl.length=0}var vs=At.ReactCurrentDispatcher,yl=At.ReactCurrentBatchConfig,kn=0,te=null,ue=null,me=null,Ws=!1,Gr=!1,pi=0,g_=0;function Te(){throw Error(C(321))}function Nu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dt(t[n],e[n]))return!1;return!0}function Ru(t,e,n,r,i,s){if(kn=s,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vs.current=t===null||t.memoizedState===null?w_:C_,t=n(r,i),Gr){s=0;do{if(Gr=!1,pi=0,25<=s)throw Error(C(301));s+=1,me=ue=null,e.updateQueue=null,vs.current=S_,t=n(r,i)}while(Gr)}if(vs.current=Hs,e=ue!==null&&ue.next!==null,kn=0,me=ue=te=null,Ws=!1,e)throw Error(C(300));return t}function Pu(){var t=pi!==0;return pi=0,t}function ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?te.memoizedState=me=t:me=me.next=t,me}function et(){if(ue===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=me===null?te.memoizedState:me.next;if(e!==null)me=e,ue=t;else{if(t===null)throw Error(C(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},me===null?te.memoizedState=me=t:me=me.next=t}return me}function mi(t,e){return typeof e=="function"?e(t):e}function _l(t){var e=et(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if((kn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,te.lanes|=h,xn|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,dt(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,te.lanes|=s,xn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vl(t){var e=et(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);dt(s,e.memoizedState)||(Fe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qf(){}function Jf(t,e){var n=te,r=et(),i=e(),s=!dt(r.memoizedState,i);if(s&&(r.memoizedState=i,Fe=!0),r=r.queue,Ou(ep.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||me!==null&&me.memoizedState.tag&1){if(n.flags|=2048,gi(9,Zf.bind(null,n,r,i,e),void 0,null),ye===null)throw Error(C(349));kn&30||Xf(n,e,i)}return i}function Xf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zf(t,e,n,r){e.value=n,e.getSnapshot=r,tp(e)&&np(t)}function ep(t,e,n){return n(function(){tp(e)&&np(t)})}function tp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dt(t,n)}catch{return!0}}function np(t){var e=Rt(t,1);e!==null&&ut(e,t,1,-1)}function pd(t){var e=ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:t},e.queue=t,t=t.dispatch=v_.bind(null,te,t),[e.memoizedState,t]}function gi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rp(){return et().memoizedState}function ws(t,e,n,r){var i=ft();te.flags|=t,i.memoizedState=gi(1|e,n,void 0,r===void 0?null:r)}function ko(t,e,n,r){var i=et();r=r===void 0?null:r;var s=void 0;if(ue!==null){var o=ue.memoizedState;if(s=o.destroy,r!==null&&Nu(r,o.deps)){i.memoizedState=gi(e,n,s,r);return}}te.flags|=t,i.memoizedState=gi(1|e,n,s,r)}function md(t,e){return ws(8390656,8,t,e)}function Ou(t,e){return ko(2048,8,t,e)}function ip(t,e){return ko(4,2,t,e)}function sp(t,e){return ko(4,4,t,e)}function op(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lp(t,e,n){return n=n!=null?n.concat([t]):null,ko(4,4,op.bind(null,e,t),n)}function Du(){}function ap(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function up(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cp(t,e,n){return kn&21?(dt(n,e)||(n=mf(),te.lanes|=n,xn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function y_(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=yl.transition;yl.transition={};try{t(!1),e()}finally{H=n,yl.transition=r}}function dp(){return et().memoizedState}function __(t,e,n){var r=Yt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hp(t))fp(e,n);else if(n=Qf(t,e,n,r),n!==null){var i=De();ut(n,t,r,i),pp(n,e,r)}}function v_(t,e,n){var r=Yt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hp(t))fp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,dt(l,o)){var a=e.interleaved;a===null?(i.next=i,Eu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Qf(t,e,i,r),n!==null&&(i=De(),ut(n,t,r,i),pp(n,e,r))}}function hp(t){var e=t.alternate;return t===te||e!==null&&e===te}function fp(t,e){Gr=Ws=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}var Hs={readContext:Ze,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},w_={readContext:Ze,useCallback:function(t,e){return ft().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:md,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ws(4194308,4,op.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ws(4194308,4,t,e)},useInsertionEffect:function(t,e){return ws(4,2,t,e)},useMemo:function(t,e){var n=ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ft();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=__.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=ft();return t={current:t},e.memoizedState=t},useState:pd,useDebugValue:Du,useDeferredValue:function(t){return ft().memoizedState=t},useTransition:function(){var t=pd(!1),e=t[0];return t=y_.bind(null,t[1]),ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,i=ft();if(Z){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),ye===null)throw Error(C(349));kn&30||Xf(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,md(ep.bind(null,r,s,t),[t]),r.flags|=2048,gi(9,Zf.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ft(),e=ye.identifierPrefix;if(Z){var n=Et,r=St;n=(r&~(1<<32-at(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=g_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C_={readContext:Ze,useCallback:ap,useContext:Ze,useEffect:Ou,useImperativeHandle:lp,useInsertionEffect:ip,useLayoutEffect:sp,useMemo:up,useReducer:_l,useRef:rp,useState:function(){return _l(mi)},useDebugValue:Du,useDeferredValue:function(t){var e=et();return cp(e,ue.memoizedState,t)},useTransition:function(){var t=_l(mi)[0],e=et().memoizedState;return[t,e]},useMutableSource:qf,useSyncExternalStore:Jf,useId:dp,unstable_isNewReconciler:!1},S_={readContext:Ze,useCallback:ap,useContext:Ze,useEffect:Ou,useImperativeHandle:lp,useInsertionEffect:ip,useLayoutEffect:sp,useMemo:up,useReducer:vl,useRef:rp,useState:function(){return vl(mi)},useDebugValue:Du,useDeferredValue:function(t){var e=et();return ue===null?e.memoizedState=t:cp(e,ue.memoizedState,t)},useTransition:function(){var t=vl(mi)[0],e=et().memoizedState;return[t,e]},useMutableSource:qf,useSyncExternalStore:Jf,useId:dp,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function da(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xo={isMounted:function(t){return(t=t._reactInternals)?On(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=De(),i=Yt(t),s=xt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Qt(t,s,i),e!==null&&(ut(e,t,i,r),_s(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=De(),i=Yt(t),s=xt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qt(t,s,i),e!==null&&(ut(e,t,i,r),_s(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=De(),r=Yt(t),i=xt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qt(t,i,r),e!==null&&(ut(e,t,r,n),_s(e,t,r))}};function gd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ai(n,r)||!ai(i,s):!0}function mp(t,e,n){var r=!1,i=nn,s=e.contextType;return typeof s=="object"&&s!==null?s=Ze(s):(i=$e(e)?Sn:Re.current,r=e.contextTypes,s=(r=r!=null)?sr(t,i):nn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xo.enqueueReplaceState(e,e.state,null)}function ha(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ku(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ze(s):(s=$e(e)?Sn:Re.current,i.context=sr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(da(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xo.enqueueReplaceState(i,i.state,null),Us(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ur(t,e){try{var n="",r=e;do n+=qg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var E_=typeof WeakMap=="function"?WeakMap:Map;function gp(t,e,n){n=xt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gs||(Gs=!0,Ea=r),fa(t,e)},n}function yp(t,e,n){n=xt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fa(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fa(t,e),typeof r!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _d(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new E_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=F_.bind(null,t,e,n),e.then(t,t))}function vd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xt(-1,1),e.tag=2,Qt(n,e,1))),n.lanes|=1),t)}var k_=At.ReactCurrentOwner,Fe=!1;function Pe(t,e,n,r){e.child=t===null?Gf(e,null,n,r):lr(e,t.child,n,r)}function Cd(t,e,n,r,i){n=n.render;var s=e.ref;return Zn(e,i),r=Ru(t,e,n,r,s,i),n=Pu(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(Z&&n&&yu(e),e.flags|=1,Pe(t,e,r,i),e.child)}function Sd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$u(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_p(t,e,s,r,i)):(t=ks(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ai,n(o,r)&&t.ref===e.ref)return Pt(t,e,i)}return e.flags|=1,t=qt(s,r),t.ref=e.ref,t.return=e,e.child=t}function _p(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ai(s,r)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Pt(t,e,i)}return pa(t,e,n,r,i)}function vp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Qn,Be),Be|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,q(Qn,Be),Be|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,q(Qn,Be),Be|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,q(Qn,Be),Be|=r;return Pe(t,e,i,n),e.child}function wp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pa(t,e,n,r,i){var s=$e(n)?Sn:Re.current;return s=sr(e,s),Zn(e,i),n=Ru(t,e,n,r,s,i),r=Pu(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(Z&&r&&yu(e),e.flags|=1,Pe(t,e,n,i),e.child)}function Ed(t,e,n,r,i){if($e(n)){var s=!0;bs(e)}else s=!1;if(Zn(e,i),e.stateNode===null)Cs(t,e),mp(e,n,r),ha(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ze(u):(u=$e(n)?Sn:Re.current,u=sr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&yd(e,o,r,u),Ft=!1;var f=e.memoizedState;o.state=f,Us(e,r,o,i),a=e.memoizedState,l!==r||f!==a||ze.current||Ft?(typeof h=="function"&&(da(e,n,h,r),a=e.memoizedState),(l=Ft||gd(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Kf(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rt(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ze(a):(a=$e(n)?Sn:Re.current,a=sr(e,a));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&yd(e,o,r,a),Ft=!1,f=e.memoizedState,o.state=f,Us(e,r,o,i);var _=e.memoizedState;l!==d||f!==_||ze.current||Ft?(typeof y=="function"&&(da(e,n,y,r),_=e.memoizedState),(u=Ft||gd(e,n,u,r,f,_,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ma(t,e,n,r,s,i)}function ma(t,e,n,r,i,s){wp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ad(e,n,!1),Pt(t,e,s);r=e.stateNode,k_.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lr(e,t.child,null,s),e.child=lr(e,null,l,s)):Pe(t,e,l,s),e.memoizedState=r.state,i&&ad(e,n,!0),e.child}function Cp(t){var e=t.stateNode;e.pendingContext?ld(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ld(t,e.context,!1),xu(t,e.containerInfo)}function kd(t,e,n,r,i){return or(),vu(i),e.flags|=256,Pe(t,e,n,r),e.child}var ga={dehydrated:null,treeContext:null,retryLane:0};function ya(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sp(t,e,n){var r=e.pendingProps,i=ee.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),q(ee,i&1),t===null)return ua(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=No(o,r,0,null),t=Cn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ya(n),e.memoizedState=ga,t):Au(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return x_(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=qt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=qt(l,s):(s=Cn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ya(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ga,r}return s=t.child,t=s.sibling,r=qt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Au(t,e){return e=No({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ls(t,e,n,r){return r!==null&&vu(r),lr(e,t.child,null,n),t=Au(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x_(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wl(Error(C(422))),ls(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=No({mode:"visible",children:r.children},i,0,null),s=Cn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lr(e,t.child,null,o),e.child.memoizedState=ya(o),e.memoizedState=ga,s);if(!(e.mode&1))return ls(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(C(419)),r=wl(s,r,void 0),ls(t,e,o,r)}if(l=(o&t.childLanes)!==0,Fe||l){if(r=ye,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rt(t,i),ut(r,t,i,-1))}return zu(),r=wl(Error(C(421))),ls(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=j_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,We=Gt(i.nextSibling),He=e,Z=!0,st=null,t!==null&&(Ke[Ye++]=St,Ke[Ye++]=Et,Ke[Ye++]=En,St=t.id,Et=t.overflow,En=e),e=Au(e,r.children),e.flags|=4096,e)}function xd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ca(t.return,e,n)}function Cl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ep(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pe(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xd(t,n,e);else if(t.tag===19)xd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(q(ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cl(e,!0,n,null,s);break;case"together":Cl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=qt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T_(t,e,n){switch(e.tag){case 3:Cp(e),or();break;case 5:Yf(e);break;case 1:$e(e.type)&&bs(e);break;case 4:xu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;q(zs,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(q(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Sp(t,e,n):(q(ee,ee.current&1),t=Pt(t,e,n),t!==null?t.sibling:null);q(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ep(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),q(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,vp(t,e,n)}return Pt(t,e,n)}var kp,_a,xp,Tp;kp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_a=function(){};xp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_n(gt.current);var s=null;switch(n){case"input":i=$l(t,i),r=$l(t,r),s=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),s=[];break;case"textarea":i=Wl(t,i),r=Wl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ls)}Vl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ti.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ti.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&J("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Tp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Or(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function I_(t,e,n){var r=e.pendingProps;switch(_u(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return $e(e.type)&&Ms(),Ie(e),null;case 3:return r=e.stateNode,ar(),X(ze),X(Re),Iu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ss(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(Ta(st),st=null))),_a(t,e),Ie(e),null;case 5:Tu(e);var i=_n(fi.current);if(n=e.type,t!==null&&e.stateNode!=null)xp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return Ie(e),null}if(t=_n(gt.current),ss(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pt]=e,r[di]=s,t=(e.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(i=0;i<$r.length;i++)J($r[i],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":Lc(r,s),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},J("invalid",r);break;case"textarea":bc(r,s),J("invalid",r)}Vl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&is(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&is(r.textContent,l,t),i=["children",""+l]):ti.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&J("scroll",r)}switch(n){case"input":qi(r),Mc(r,s,!0);break;case"textarea":qi(r),Fc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ls)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pt]=e,t[di]=r,kp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gl(n,r),n){case"dialog":J("cancel",t),J("close",t),i=r;break;case"iframe":case"object":case"embed":J("load",t),i=r;break;case"video":case"audio":for(i=0;i<$r.length;i++)J($r[i],t);i=r;break;case"source":J("error",t),i=r;break;case"img":case"image":case"link":J("error",t),J("load",t),i=r;break;case"details":J("toggle",t),i=r;break;case"input":Lc(t,r),i=$l(t,r),J("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),J("invalid",t);break;case"textarea":bc(t,r),i=Wl(t,r),J("invalid",t);break;default:i=r}Vl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?nf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ef(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ni(t,a):typeof a=="number"&&ni(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ti.hasOwnProperty(s)?a!=null&&s==="onScroll"&&J("scroll",t):a!=null&&ru(t,s,a,o))}switch(n){case"input":qi(t),Mc(t,r,!1);break;case"textarea":qi(t),Fc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yn(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Tp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=_n(fi.current),_n(gt.current),ss(e)){if(r=e.stateNode,n=e.memoizedProps,r[pt]=e,(s=r.nodeValue!==n)&&(t=He,t!==null))switch(t.tag){case 3:is(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&is(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pt]=e,e.stateNode=r}return Ie(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&We!==null&&e.mode&1&&!(e.flags&128))Hf(),or(),e.flags|=98560,s=!1;else if(s=ss(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[pt]=e}else or(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),s=!1}else st!==null&&(Ta(st),st=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?he===0&&(he=3):zu())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return ar(),_a(t,e),t===null&&ui(e.stateNode.containerInfo),Ie(e),null;case 10:return Su(e.type._context),Ie(e),null;case 17:return $e(e.type)&&Ms(),Ie(e),null;case 19:if(X(ee),s=e.memoizedState,s===null)return Ie(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Or(s,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bs(t),o!==null){for(e.flags|=128,Or(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return q(ee,ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&le()>cr&&(e.flags|=128,r=!0,Or(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Or(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Z)return Ie(e),null}else 2*le()-s.renderingStartTime>cr&&n!==1073741824&&(e.flags|=128,r=!0,Or(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=le(),e.sibling=null,n=ee.current,q(ee,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return ju(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Be&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function N_(t,e){switch(_u(e),e.tag){case 1:return $e(e.type)&&Ms(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ar(),X(ze),X(Re),Iu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tu(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));or()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return ar(),null;case 10:return Su(e.type._context),null;case 22:case 23:return ju(),null;case 24:return null;default:return null}}var as=!1,Ne=!1,R_=typeof WeakSet=="function"?WeakSet:Set,I=null;function Gn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function va(t,e,n){try{n()}catch(r){re(t,e,r)}}var Td=!1;function P_(t,e){if(na=Os,t=Of(),gu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++h===r&&(a=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ra={focusedElem:t,selectionRange:n},Os=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,k=_.memoizedState,m=e.stateNode,c=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:rt(e.type,v),k);m.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(w){re(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return _=Td,Td=!1,_}function Qr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&va(e,n,s)}i=i.next}while(i!==r)}}function To(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wa(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ip(t){var e=t.alternate;e!==null&&(t.alternate=null,Ip(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[di],delete e[oa],delete e[h_],delete e[f_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Np(t){return t.tag===5||t.tag===3||t.tag===4}function Id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ca(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ls));else if(r!==4&&(t=t.child,t!==null))for(Ca(t,e,n),t=t.sibling;t!==null;)Ca(t,e,n),t=t.sibling}function Sa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sa(t,e,n),t=t.sibling;t!==null;)Sa(t,e,n),t=t.sibling}var Ce=null,it=!1;function Mt(t,e,n){for(n=n.child;n!==null;)Rp(t,e,n),n=n.sibling}function Rp(t,e,n){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(_o,n)}catch{}switch(n.tag){case 5:Ne||Gn(n,e);case 6:var r=Ce,i=it;Ce=null,Mt(t,e,n),Ce=r,it=i,Ce!==null&&(it?(t=Ce,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(it?(t=Ce,n=n.stateNode,t.nodeType===8?pl(t.parentNode,n):t.nodeType===1&&pl(t,n),oi(t)):pl(Ce,n.stateNode));break;case 4:r=Ce,i=it,Ce=n.stateNode.containerInfo,it=!0,Mt(t,e,n),Ce=r,it=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&va(n,e,o),i=i.next}while(i!==r)}Mt(t,e,n);break;case 1:if(!Ne&&(Gn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){re(n,e,l)}Mt(t,e,n);break;case 21:Mt(t,e,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,Mt(t,e,n),Ne=r):Mt(t,e,n);break;default:Mt(t,e,n)}}function Nd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new R_),e.forEach(function(r){var i=z_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ce=l.stateNode,it=!1;break e;case 3:Ce=l.stateNode.containerInfo,it=!0;break e;case 4:Ce=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(Ce===null)throw Error(C(160));Rp(s,o,i),Ce=null,it=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){re(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pp(e,t),e=e.sibling}function Pp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),ht(t),r&4){try{Qr(3,t,t.return),To(3,t)}catch(v){re(t,t.return,v)}try{Qr(5,t,t.return)}catch(v){re(t,t.return,v)}}break;case 1:nt(e,t),ht(t),r&512&&n!==null&&Gn(n,n.return);break;case 5:if(nt(e,t),ht(t),r&512&&n!==null&&Gn(n,n.return),t.flags&32){var i=t.stateNode;try{ni(i,"")}catch(v){re(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Jh(i,s),Gl(l,o);var u=Gl(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?nf(i,d):h==="dangerouslySetInnerHTML"?ef(i,d):h==="children"?ni(i,d):ru(i,h,d,u)}switch(l){case"input":Ul(i,s);break;case"textarea":Xh(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Yn(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?Yn(i,!!s.multiple,s.defaultValue,!0):Yn(i,!!s.multiple,s.multiple?[]:"",!1))}i[di]=s}catch(v){re(t,t.return,v)}}break;case 6:if(nt(e,t),ht(t),r&4){if(t.stateNode===null)throw Error(C(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){re(t,t.return,v)}}break;case 3:if(nt(e,t),ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oi(e.containerInfo)}catch(v){re(t,t.return,v)}break;case 4:nt(e,t),ht(t);break;case 13:nt(e,t),ht(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bu=le())),r&4&&Nd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ne=(u=Ne)||h,nt(e,t),Ne=u):nt(e,t),ht(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(I=t,h=t.child;h!==null;){for(d=I=h;I!==null;){switch(f=I,y=f.child,f.tag){case 0:case 11:case 14:case 15:Qr(4,f,f.return);break;case 1:Gn(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){re(r,n,v)}}break;case 5:Gn(f,f.return);break;case 22:if(f.memoizedState!==null){Pd(d);continue}}y!==null?(y.return=f,I=y):Pd(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=tf("display",o))}catch(v){re(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){re(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nt(e,t),ht(t),r&4&&Nd(t);break;case 21:break;default:nt(e,t),ht(t)}}function ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Np(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ni(i,""),r.flags&=-33);var s=Id(t);Sa(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Id(t);Ca(t,l,o);break;default:throw Error(C(161))}}catch(a){re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O_(t,e,n){I=t,Op(t)}function Op(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||as;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ne;l=as;var u=Ne;if(as=o,(Ne=a)&&!u)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?Od(i):a!==null?(a.return=o,I=a):Od(i);for(;s!==null;)I=s,Op(s),s=s.sibling;I=i,as=l,Ne=u}Rd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):Rd(t)}}function Rd(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ne||To(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&oi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Ne||e.flags&512&&wa(e)}catch(f){re(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function Pd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function Od(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{To(4,e)}catch(a){re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){re(e,i,a)}}var s=e.return;try{wa(e)}catch(a){re(e,s,a)}break;case 5:var o=e.return;try{wa(e)}catch(a){re(e,o,a)}}}catch(a){re(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var D_=Math.ceil,Vs=At.ReactCurrentDispatcher,Lu=At.ReactCurrentOwner,Xe=At.ReactCurrentBatchConfig,$=0,ye=null,ae=null,Ee=0,Be=0,Qn=an(0),he=0,yi=null,xn=0,Io=0,Mu=0,Kr=null,be=null,bu=0,cr=1/0,wt=null,Gs=!1,Ea=null,Kt=null,us=!1,Ut=null,Qs=0,Yr=0,ka=null,Ss=-1,Es=0;function De(){return $&6?le():Ss!==-1?Ss:Ss=le()}function Yt(t){return t.mode&1?$&2&&Ee!==0?Ee&-Ee:m_.transition!==null?(Es===0&&(Es=mf()),Es):(t=H,t!==0||(t=window.event,t=t===void 0?16:Sf(t.type)),t):1}function ut(t,e,n,r){if(50<Yr)throw Yr=0,ka=null,Error(C(185));Di(t,n,r),(!($&2)||t!==ye)&&(t===ye&&(!($&2)&&(Io|=n),he===4&&zt(t,Ee)),Ue(t,r),n===1&&$===0&&!(e.mode&1)&&(cr=le()+500,Eo&&un()))}function Ue(t,e){var n=t.callbackNode;my(t,e);var r=Ps(t,t===ye?Ee:0);if(r===0)n!==null&&$c(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$c(n),e===1)t.tag===0?p_(Dd.bind(null,t)):Uf(Dd.bind(null,t)),c_(function(){!($&6)&&un()}),n=null;else{switch(gf(r)){case 1:n=au;break;case 4:n=ff;break;case 16:n=Rs;break;case 536870912:n=pf;break;default:n=Rs}n=zp(n,Dp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dp(t,e){if(Ss=-1,Es=0,$&6)throw Error(C(327));var n=t.callbackNode;if(er()&&t.callbackNode!==n)return null;var r=Ps(t,t===ye?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ks(t,r);else{e=r;var i=$;$|=2;var s=Lp();(ye!==t||Ee!==e)&&(wt=null,cr=le()+500,wn(t,e));do try{M_();break}catch(l){Ap(t,l)}while(!0);Cu(),Vs.current=s,$=i,ae!==null?e=0:(ye=null,Ee=0,e=he)}if(e!==0){if(e===2&&(i=Jl(t),i!==0&&(r=i,e=xa(t,i))),e===1)throw n=yi,wn(t,0),zt(t,r),Ue(t,le()),n;if(e===6)zt(t,r);else{if(i=t.current.alternate,!(r&30)&&!A_(i)&&(e=Ks(t,r),e===2&&(s=Jl(t),s!==0&&(r=s,e=xa(t,s))),e===1))throw n=yi,wn(t,0),zt(t,r),Ue(t,le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:fn(t,be,wt);break;case 3:if(zt(t,r),(r&130023424)===r&&(e=bu+500-le(),10<e)){if(Ps(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){De(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sa(fn.bind(null,t,be,wt),e);break}fn(t,be,wt);break;case 4:if(zt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-at(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D_(r/1960))-r,10<r){t.timeoutHandle=sa(fn.bind(null,t,be,wt),r);break}fn(t,be,wt);break;case 5:fn(t,be,wt);break;default:throw Error(C(329))}}}return Ue(t,le()),t.callbackNode===n?Dp.bind(null,t):null}function xa(t,e){var n=Kr;return t.current.memoizedState.isDehydrated&&(wn(t,e).flags|=256),t=Ks(t,e),t!==2&&(e=be,be=n,e!==null&&Ta(e)),t}function Ta(t){be===null?be=t:be.push.apply(be,t)}function A_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!dt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zt(t,e){for(e&=~Mu,e&=~Io,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-at(e),r=1<<n;t[n]=-1,e&=~r}}function Dd(t){if($&6)throw Error(C(327));er();var e=Ps(t,0);if(!(e&1))return Ue(t,le()),null;var n=Ks(t,e);if(t.tag!==0&&n===2){var r=Jl(t);r!==0&&(e=r,n=xa(t,r))}if(n===1)throw n=yi,wn(t,0),zt(t,e),Ue(t,le()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fn(t,be,wt),Ue(t,le()),null}function Fu(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(cr=le()+500,Eo&&un())}}function Tn(t){Ut!==null&&Ut.tag===0&&!($&6)&&er();var e=$;$|=1;var n=Xe.transition,r=H;try{if(Xe.transition=null,H=1,t)return t()}finally{H=r,Xe.transition=n,$=e,!($&6)&&un()}}function ju(){Be=Qn.current,X(Qn)}function wn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,u_(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(_u(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ms();break;case 3:ar(),X(ze),X(Re),Iu();break;case 5:Tu(r);break;case 4:ar();break;case 13:X(ee);break;case 19:X(ee);break;case 10:Su(r.type._context);break;case 22:case 23:ju()}n=n.return}if(ye=t,ae=t=qt(t.current,null),Ee=Be=e,he=0,yi=null,Mu=Io=xn=0,be=Kr=null,yn!==null){for(e=0;e<yn.length;e++)if(n=yn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}yn=null}return t}function Ap(t,e){do{var n=ae;try{if(Cu(),vs.current=Hs,Ws){for(var r=te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ws=!1}if(kn=0,me=ue=te=null,Gr=!1,pi=0,Lu.current=null,n===null||n.return===null){he=1,yi=e,ae=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ee,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=vd(o);if(y!==null){y.flags&=-257,wd(y,o,l,s,e),y.mode&1&&_d(s,u,e),e=y,a=u;var _=e.updateQueue;if(_===null){var v=new Set;v.add(a),e.updateQueue=v}else _.add(a);break e}else{if(!(e&1)){_d(s,u,e),zu();break e}a=Error(C(426))}}else if(Z&&l.mode&1){var k=vd(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),wd(k,o,l,s,e),vu(ur(a,l));break e}}s=a=ur(a,l),he!==4&&(he=2),Kr===null?Kr=[s]:Kr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=gp(s,a,e);hd(s,m);break e;case 1:l=a;var c=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof c.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Kt===null||!Kt.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=yp(s,l,e);hd(s,w);break e}}s=s.return}while(s!==null)}bp(n)}catch(S){e=S,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function Lp(){var t=Vs.current;return Vs.current=Hs,t===null?Hs:t}function zu(){(he===0||he===3||he===2)&&(he=4),ye===null||!(xn&268435455)&&!(Io&268435455)||zt(ye,Ee)}function Ks(t,e){var n=$;$|=2;var r=Lp();(ye!==t||Ee!==e)&&(wt=null,wn(t,e));do try{L_();break}catch(i){Ap(t,i)}while(!0);if(Cu(),$=n,Vs.current=r,ae!==null)throw Error(C(261));return ye=null,Ee=0,he}function L_(){for(;ae!==null;)Mp(ae)}function M_(){for(;ae!==null&&!oy();)Mp(ae)}function Mp(t){var e=jp(t.alternate,t,Be);t.memoizedProps=t.pendingProps,e===null?bp(t):ae=e,Lu.current=null}function bp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N_(n,e),n!==null){n.flags&=32767,ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,ae=null;return}}else if(n=I_(n,e,Be),n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);he===0&&(he=5)}function fn(t,e,n){var r=H,i=Xe.transition;try{Xe.transition=null,H=1,b_(t,e,n,r)}finally{Xe.transition=i,H=r}return null}function b_(t,e,n,r){do er();while(Ut!==null);if($&6)throw Error(C(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(gy(t,s),t===ye&&(ae=ye=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||us||(us=!0,zp(Rs,function(){return er(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xe.transition,Xe.transition=null;var o=H;H=1;var l=$;$|=4,Lu.current=null,P_(t,n),Pp(n,t),n_(ra),Os=!!na,ra=na=null,t.current=n,O_(n),ly(),$=l,H=o,Xe.transition=s}else t.current=n;if(us&&(us=!1,Ut=t,Qs=i),s=t.pendingLanes,s===0&&(Kt=null),cy(n.stateNode),Ue(t,le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,t=Ea,Ea=null,t;return Qs&1&&t.tag!==0&&er(),s=t.pendingLanes,s&1?t===ka?Yr++:(Yr=0,ka=t):Yr=0,un(),null}function er(){if(Ut!==null){var t=gf(Qs),e=Xe.transition,n=H;try{if(Xe.transition=null,H=16>t?16:t,Ut===null)var r=!1;else{if(t=Ut,Ut=null,Qs=0,$&6)throw Error(C(331));var i=$;for($|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(I=u;I!==null;){var h=I;switch(h.tag){case 0:case 11:case 15:Qr(8,h,s)}var d=h.child;if(d!==null)d.return=h,I=d;else for(;I!==null;){h=I;var f=h.sibling,y=h.return;if(Ip(h),h===u){I=null;break}if(f!==null){f.return=y,I=f;break}I=y}}}var _=s.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,I=m;break e}I=s.return}}var c=t.current;for(I=c;I!==null;){o=I;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,I=g;else e:for(o=c;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:To(9,l)}}catch(S){re(l,l.return,S)}if(l===o){I=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,I=w;break e}I=l.return}}if($=i,un(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(_o,t)}catch{}r=!0}return r}finally{H=n,Xe.transition=e}}return!1}function Ad(t,e,n){e=ur(n,e),e=gp(t,e,1),t=Qt(t,e,1),e=De(),t!==null&&(Di(t,1,e),Ue(t,e))}function re(t,e,n){if(t.tag===3)Ad(t,t,n);else for(;e!==null;){if(e.tag===3){Ad(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kt===null||!Kt.has(r))){t=ur(n,t),t=yp(e,t,1),e=Qt(e,t,1),t=De(),e!==null&&(Di(e,1,t),Ue(e,t));break}}e=e.return}}function F_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=De(),t.pingedLanes|=t.suspendedLanes&n,ye===t&&(Ee&n)===n&&(he===4||he===3&&(Ee&130023424)===Ee&&500>le()-bu?wn(t,0):Mu|=n),Ue(t,e)}function Fp(t,e){e===0&&(t.mode&1?(e=Zi,Zi<<=1,!(Zi&130023424)&&(Zi=4194304)):e=1);var n=De();t=Rt(t,e),t!==null&&(Di(t,e,n),Ue(t,n))}function j_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fp(t,n)}function z_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),Fp(t,n)}var jp;jp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,T_(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,Z&&e.flags&1048576&&Bf(e,js,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cs(t,e),t=e.pendingProps;var i=sr(e,Re.current);Zn(e,n),i=Ru(null,e,r,t,i,n);var s=Pu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$e(r)?(s=!0,bs(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ku(e),i.updater=xo,e.stateNode=i,i._reactInternals=e,ha(e,r,t,n),e=ma(null,e,r,!0,s,n)):(e.tag=0,Z&&s&&yu(e),Pe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=U_(r),t=rt(r,t),i){case 0:e=pa(null,e,r,t,n);break e;case 1:e=Ed(null,e,r,t,n);break e;case 11:e=Cd(null,e,r,t,n);break e;case 14:e=Sd(null,e,r,rt(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),pa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Ed(t,e,r,i,n);case 3:e:{if(Cp(e),t===null)throw Error(C(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Kf(t,e),Us(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ur(Error(C(423)),e),e=kd(t,e,r,n,i);break e}else if(r!==i){i=ur(Error(C(424)),e),e=kd(t,e,r,n,i);break e}else for(We=Gt(e.stateNode.containerInfo.firstChild),He=e,Z=!0,st=null,n=Gf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(or(),r===i){e=Pt(t,e,n);break e}Pe(t,e,r,n)}e=e.child}return e;case 5:return Yf(e),t===null&&ua(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ia(r,i)?o=null:s!==null&&ia(r,s)&&(e.flags|=32),wp(t,e),Pe(t,e,o,n),e.child;case 6:return t===null&&ua(e),null;case 13:return Sp(t,e,n);case 4:return xu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lr(e,null,r,n):Pe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Cd(t,e,r,i,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,q(zs,r._currentValue),r._currentValue=o,s!==null)if(dt(s.value,o)){if(s.children===i.children&&!ze.current){e=Pt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=xt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ca(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ca(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zn(e,n),i=Ze(i),r=r(i),e.flags|=1,Pe(t,e,r,n),e.child;case 14:return r=e.type,i=rt(r,e.pendingProps),i=rt(r.type,i),Sd(t,e,r,i,n);case 15:return _p(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Cs(t,e),e.tag=1,$e(r)?(t=!0,bs(e)):t=!1,Zn(e,n),mp(e,r,i),ha(e,r,i,n),ma(null,e,r,!0,t,n);case 19:return Ep(t,e,n);case 22:return vp(t,e,n)}throw Error(C(156,e.tag))};function zp(t,e){return hf(t,e)}function $_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,n,r){return new $_(t,e,n,r)}function $u(t){return t=t.prototype,!(!t||!t.isReactComponent)}function U_(t){if(typeof t=="function")return $u(t)?1:0;if(t!=null){if(t=t.$$typeof,t===su)return 11;if(t===ou)return 14}return 2}function qt(t,e){var n=t.alternate;return n===null?(n=qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ks(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")$u(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fn:return Cn(n.children,i,s,e);case iu:o=8,i|=8;break;case bl:return t=qe(12,n,e,i|2),t.elementType=bl,t.lanes=s,t;case Fl:return t=qe(13,n,e,i),t.elementType=Fl,t.lanes=s,t;case jl:return t=qe(19,n,e,i),t.elementType=jl,t.lanes=s,t;case Kh:return No(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gh:o=10;break e;case Qh:o=9;break e;case su:o=11;break e;case ou:o=14;break e;case bt:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=qe(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cn(t,e,n,r){return t=qe(7,t,r,e),t.lanes=n,t}function No(t,e,n,r){return t=qe(22,t,r,e),t.elementType=Kh,t.lanes=n,t.stateNode={isHidden:!1},t}function Sl(t,e,n){return t=qe(6,t,null,e),t.lanes=n,t}function El(t,e,n){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rl(0),this.expirationTimes=rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,i,s,o,l,a){return t=new B_(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qe(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ku(s),t}function W_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $p(t){if(!t)return nn;t=t._reactInternals;e:{if(On(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($e(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if($e(n))return $f(t,n,e)}return e}function Up(t,e,n,r,i,s,o,l,a){return t=Uu(n,r,!0,t,i,s,o,l,a),t.context=$p(null),n=t.current,r=De(),i=Yt(n),s=xt(r,i),s.callback=e??null,Qt(n,s,i),t.current.lanes=i,Di(t,i,r),Ue(t,r),t}function Ro(t,e,n,r){var i=e.current,s=De(),o=Yt(i);return n=$p(n),e.context===null?e.context=n:e.pendingContext=n,e=xt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qt(i,e,o),t!==null&&(ut(t,i,o,s),_s(t,i,o)),o}function Ys(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ld(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bu(t,e){Ld(t,e),(t=t.alternate)&&Ld(t,e)}function H_(){return null}var Bp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wu(t){this._internalRoot=t}Po.prototype.render=Wu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));Ro(t,e,null,null)};Po.prototype.unmount=Wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tn(function(){Ro(null,t,null,null)}),e[Nt]=null}};function Po(t){this._internalRoot=t}Po.prototype.unstable_scheduleHydration=function(t){if(t){var e=vf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jt.length&&e!==0&&e<jt[n].priority;n++);jt.splice(n,0,t),n===0&&Cf(t)}};function Hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Md(){}function V_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ys(o);s.call(u)}}var o=Up(e,r,t,0,null,!1,!1,"",Md);return t._reactRootContainer=o,t[Nt]=o.current,ui(t.nodeType===8?t.parentNode:t),Tn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ys(a);l.call(u)}}var a=Uu(t,0,!1,null,null,!1,!1,"",Md);return t._reactRootContainer=a,t[Nt]=a.current,ui(t.nodeType===8?t.parentNode:t),Tn(function(){Ro(e,a,n,r)}),a}function Do(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Ys(o);l.call(a)}}Ro(e,o,t,i)}else o=V_(n,e,t,i,r);return Ys(o)}yf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zr(e.pendingLanes);n!==0&&(uu(e,n|1),Ue(e,le()),!($&6)&&(cr=le()+500,un()))}break;case 13:Tn(function(){var r=Rt(t,1);if(r!==null){var i=De();ut(r,t,1,i)}}),Bu(t,1)}};cu=function(t){if(t.tag===13){var e=Rt(t,134217728);if(e!==null){var n=De();ut(e,t,134217728,n)}Bu(t,134217728)}};_f=function(t){if(t.tag===13){var e=Yt(t),n=Rt(t,e);if(n!==null){var r=De();ut(n,t,e,r)}Bu(t,e)}};vf=function(){return H};wf=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};Kl=function(t,e,n){switch(e){case"input":if(Ul(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=So(r);if(!i)throw Error(C(90));qh(r),Ul(r,i)}}}break;case"textarea":Xh(t,n);break;case"select":e=n.value,e!=null&&Yn(t,!!n.multiple,e,!1)}};of=Fu;lf=Tn;var G_={usingClientEntryPoint:!1,Events:[Li,Un,So,rf,sf,Fu]},Dr={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q_={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:At.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cf(t),t===null?null:t.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||H_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cs.isDisabled&&cs.supportsFiber)try{_o=cs.inject(Q_),mt=cs}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G_;Ge.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hu(e))throw Error(C(200));return W_(t,e,null,n)};Ge.createRoot=function(t,e){if(!Hu(t))throw Error(C(299));var n=!1,r="",i=Bp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,null,n,!1,r,i),t[Nt]=e.current,ui(t.nodeType===8?t.parentNode:t),new Wu(e)};Ge.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=cf(e),t=t===null?null:t.stateNode,t};Ge.flushSync=function(t){return Tn(t)};Ge.hydrate=function(t,e,n){if(!Oo(e))throw Error(C(200));return Do(null,t,e,!0,n)};Ge.hydrateRoot=function(t,e,n){if(!Hu(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Bp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Up(e,null,t,1,n??null,i,!1,s,o),t[Nt]=e.current,ui(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Po(e)};Ge.render=function(t,e,n){if(!Oo(e))throw Error(C(200));return Do(null,t,e,!1,n)};Ge.unmountComponentAtNode=function(t){if(!Oo(t))throw Error(C(40));return t._reactRootContainer?(Tn(function(){Do(null,null,t,!1,function(){t._reactRootContainer=null,t[Nt]=null})}),!0):!1};Ge.unstable_batchedUpdates=Fu;Ge.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oo(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Do(t,e,n,!1,r)};Ge.version="18.3.1-next-f1338f8080-20240426";function Wp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wp)}catch(t){console.error(t)}}Wp(),Bh.exports=Ge;var K_=Bh.exports,Hp,bd=K_;Hp=bd.createRoot,bd.hydrateRoot;const bi=W.createContext({userName:null,setUserName:()=>{}});var Fd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E=function(t,e){if(!t)throw wr(e)},wr=function(t){return new Error("Firebase Database ("+Vp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Y_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,y=u&63;a||(y=64,o||(f=64)),r.push(n[h],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Y_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new q_;const f=s<<2|l>>4;if(r.push(f),u!==64){const y=l<<4&240|u>>2;if(r.push(y),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class q_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qp=function(t){const e=Gp(t);return Vu.encodeByteArray(e,!0)},qs=function(t){return Qp(t).replace(/\./g,"")},Ia=function(t){try{return Vu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return Kp(void 0,t)}function Kp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!X_(n)||(t[n]=Kp(t[n],e[n]));return t}function X_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=()=>Z_().__FIREBASE_DEFAULTS__,t0=()=>{if(typeof process>"u"||typeof Fd>"u")return;const t=Fd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},n0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ia(t[1]);return e&&JSON.parse(e)},Yp=()=>{try{return e0()||t0()||n0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},r0=t=>{var e,n;return(n=(e=Yp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},i0=t=>{const e=r0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qp=()=>{var t;return(t=Yp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qs(JSON.stringify(n)),qs(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o0())}function l0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xp(){return Vp.NODE_ADMIN===!0}function a0(){try{return typeof indexedDB=="object"}catch{return!1}}function u0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="FirebaseError";class ji extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c0,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zp.prototype.create)}}class Zp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?d0(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ji(i,l,r)}}function d0(t,e){return t.replace(h0,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const h0=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){return JSON.parse(t)}function de(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=_i(Ia(s[0])||""),n=_i(Ia(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},f0=function(t){const e=em(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},p0=function(t){const e=em(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function jd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Js(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Na(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(zd(s)&&zd(o)){if(!Na(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),h=1518500249):(u=s^o^l,h=1859775393):d<60?(u=s&o|l&(s|o),h=2400959708):(u=s^o^l,h=3395469782);const f=(i<<5|i>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Ao(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,E(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Lo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t){return t&&t._delegate?t._delegate:t}class vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Fi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w0(e))try{this.getOrInitializeService({instanceIdentifier:pn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pn){return this.instances.has(e)}getOptions(e=pn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:v0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pn){return this.component?this.component.multipleInstances?e:pn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function v0(t){return t===pn?void 0:t}function w0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(K||(K={}));const S0={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},E0=K.INFO,k0={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},x0=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=k0[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=E0,this._logHandler=x0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}}const T0=(t,e)=>e.some(n=>t instanceof n);let $d,Ud;function I0(){return $d||($d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N0(){return Ud||(Ud=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nm=new WeakMap,Ra=new WeakMap,rm=new WeakMap,kl=new WeakMap,Gu=new WeakMap;function R0(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nm.set(n,t)}).catch(()=>{}),Gu.set(e,t),e}function P0(t){if(Ra.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ra.set(t,e)}let Pa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ra.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O0(t){Pa=t(Pa)}function D0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xl(this),e,...n);return rm.set(r,e.sort?e.sort():[e]),Jt(r)}:N0().includes(t)?function(...e){return t.apply(xl(this),e),Jt(nm.get(this))}:function(...e){return Jt(t.apply(xl(this),e))}}function A0(t){return typeof t=="function"?D0(t):(t instanceof IDBTransaction&&P0(t),T0(t,I0())?new Proxy(t,Pa):t)}function Jt(t){if(t instanceof IDBRequest)return R0(t);if(kl.has(t))return kl.get(t);const e=A0(t);return e!==t&&(kl.set(t,e),Gu.set(e,t)),e}const xl=t=>Gu.get(t);function L0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Jt(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Jt(o.result),a.oldVersion,a.newVersion,Jt(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const M0=["get","getKey","getAll","getAllKeys","count"],b0=["put","add","delete","clear"],Tl=new Map;function Bd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tl.get(e))return Tl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=b0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M0.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return Tl.set(e,s),s}O0(t=>({...t,get:(e,n,r)=>Bd(e,n)||t.get(e,n,r),has:(e,n)=>!!Bd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(j0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function j0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oa="@firebase/app",Wd="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot=new tm("@firebase/app"),z0="@firebase/app-compat",$0="@firebase/analytics-compat",U0="@firebase/analytics",B0="@firebase/app-check-compat",W0="@firebase/app-check",H0="@firebase/auth",V0="@firebase/auth-compat",G0="@firebase/database",Q0="@firebase/data-connect",K0="@firebase/database-compat",Y0="@firebase/functions",q0="@firebase/functions-compat",J0="@firebase/installations",X0="@firebase/installations-compat",Z0="@firebase/messaging",ev="@firebase/messaging-compat",tv="@firebase/performance",nv="@firebase/performance-compat",rv="@firebase/remote-config",iv="@firebase/remote-config-compat",sv="@firebase/storage",ov="@firebase/storage-compat",lv="@firebase/firestore",av="@firebase/vertexai",uv="@firebase/firestore-compat",cv="firebase",dv="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="[DEFAULT]",hv={[Oa]:"fire-core",[z0]:"fire-core-compat",[U0]:"fire-analytics",[$0]:"fire-analytics-compat",[W0]:"fire-app-check",[B0]:"fire-app-check-compat",[H0]:"fire-auth",[V0]:"fire-auth-compat",[G0]:"fire-rtdb",[Q0]:"fire-data-connect",[K0]:"fire-rtdb-compat",[Y0]:"fire-fn",[q0]:"fire-fn-compat",[J0]:"fire-iid",[X0]:"fire-iid-compat",[Z0]:"fire-fcm",[ev]:"fire-fcm-compat",[tv]:"fire-perf",[nv]:"fire-perf-compat",[rv]:"fire-rc",[iv]:"fire-rc-compat",[sv]:"fire-gcs",[ov]:"fire-gcs-compat",[lv]:"fire-fst",[uv]:"fire-fst-compat",[av]:"fire-vertex","fire-js":"fire-js",[cv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Map,fv=new Map,Aa=new Map;function Hd(t,e){try{t.container.addComponent(e)}catch(n){Ot.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){const e=t.name;if(Aa.has(e))return Ot.debug(`There were multiple attempts to register component ${e}.`),!1;Aa.set(e,t);for(const n of Xs.values())Hd(n,t);for(const n of fv.values())Hd(n,t);return!0}function pv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Zp("app","Firebase",mv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=dv;function im(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Da,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xt.create("bad-app-name",{appName:String(i)});if(n||(n=qp()),!n)throw Xt.create("no-options");const s=Xs.get(i);if(s){if(Na(n,s.options)&&Na(r,s.config))return s;throw Xt.create("duplicate-app",{appName:i})}const o=new C0(i);for(const a of Aa.values())o.addComponent(a);const l=new gv(n,r,o);return Xs.set(i,l),l}function _v(t=Da){const e=Xs.get(t);if(!e&&t===Da&&qp())return im();if(!e)throw Xt.create("no-app",{appName:t});return e}function tr(t,e,n){var r;let i=(r=hv[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ot.warn(l.join(" "));return}Zs(new vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="firebase-heartbeat-database",wv=1,wi="firebase-heartbeat-store";let Il=null;function sm(){return Il||(Il=L0(vv,wv,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xt.create("idb-open",{originalErrorMessage:t.message})})),Il}async function Cv(t){try{const n=(await sm()).transaction(wi),r=await n.objectStore(wi).get(om(t));return await n.done,r}catch(e){if(e instanceof ji)Ot.warn(e.message);else{const n=Xt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ot.warn(n.message)}}}async function Vd(t,e){try{const r=(await sm()).transaction(wi,"readwrite");await r.objectStore(wi).put(e,om(t)),await r.done}catch(n){if(n instanceof ji)Ot.warn(n.message);else{const r=Xt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ot.warn(r.message)}}}function om(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=1024,Ev=30*24*60*60*1e3;class kv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Ev}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ot.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gd(),{heartbeatsToSend:r,unsentEntries:i}=xv(this._heartbeatsCache.heartbeats),s=qs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ot.warn(n),""}}}function Gd(){return new Date().toISOString().substring(0,10)}function xv(t,e=Sv){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Qd(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Tv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return a0()?u0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Cv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Qd(t){return qs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){Zs(new vi("platform-logger",e=>new F0(e),"PRIVATE")),Zs(new vi("heartbeat",e=>new kv(e),"PRIVATE")),tr(Oa,Wd,t),tr(Oa,Wd,"esm2017"),tr("fire-js","")}Iv("");var Nv="firebase",Rv="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(Nv,Rv,"app");var Kd={};const Yd="@firebase/database",qd="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm="";function Pv(t){lm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),de(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:_i(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return yt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ov(e)}}catch{}return new Dv},vn=am("localStorage"),Av=am("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new tm("@firebase/database"),Lv=function(){let t=1;return function(){return t++}}(),um=function(t){const e=y0(t),n=new g0;n.update(e);const r=n.digest();return Vu.encodeByteArray(r)},zi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=zi.apply(null,r):typeof r=="object"?e+=de(r):e+=r,e+=" "}return e};let qr=null,Jd=!0;const Mv=function(t,e){E(!e,"Can't turn on custom loggers persistently."),nr.logLevel=K.VERBOSE,qr=nr.log.bind(nr)},Se=function(...t){if(Jd===!0&&(Jd=!1,qr===null&&Av.get("logging_enabled")===!0&&Mv()),qr){const e=zi.apply(null,t);qr(e)}},$i=function(t){return function(...e){Se(t,...e)}},La=function(...t){const e="FIREBASE INTERNAL ERROR: "+zi(...t);nr.error(e)},Dt=function(...t){const e=`FIREBASE FATAL ERROR: ${zi(...t)}`;throw nr.error(e),new Error(e)},Ae=function(...t){const e="FIREBASE WARNING: "+zi(...t);nr.warn(e)},bv=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ae("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Fv=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},hr="[MIN_NAME]",In="[MAX_NAME]",Dn=function(t,e){if(t===e)return 0;if(t===hr||e===In)return-1;if(e===hr||t===In)return 1;{const n=Xd(t),r=Xd(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},jv=function(t,e){return t===e?0:t<e?-1:1},Ar=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+de(e))},Ku=function(t){if(typeof t!="object"||t===null)return de(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=de(e[r]),n+=":",n+=Ku(t[e[r]]);return n+="}",n},cm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function xe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const dm=function(t){E(!Qu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(h.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},zv=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$v=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Uv(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Bv=new RegExp("^-?(0*)\\d{1,10}$"),Wv=-2147483648,Hv=2147483647,Xd=function(t){if(Bv.test(t)){const e=Number(t);if(e>=Wv&&e<=Hv)return e}return null},Sr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ae("Exception was thrown by user callback.",n),e},Math.floor(0))}},Vv=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ae(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Se("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ae(e)}}class xs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}xs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="5",hm="v",fm="s",pm="r",mm="f",gm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ym="ls",_m="p",Ma="ac",vm="websocket",wm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Kv(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Sm(t,e,n){E(typeof e=="string","typeof type must == string"),E(typeof n=="object","typeof params must == object");let r;if(e===vm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===wm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Kv(t)&&(n.ns=t.namespace);const i=[];return xe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.counters_={}}incrementCounter(e,n=1){yt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return J_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl={},Rl={};function qu(t){const e=t.toString();return Nl[e]||(Nl[e]=new Yv),Nl[e]}function qv(t,e){const n=t.toString();return Rl[n]||(Rl[n]=e()),Rl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Sr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="start",Xv="close",Zv="pLPCommand",e1="pRTLPCB",Em="id",km="pw",xm="ser",t1="cb",n1="seg",r1="ts",i1="d",s1="dframe",Tm=1870,Im=30,o1=Tm-Im,l1=25e3,a1=3e4;class Kn{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$i(e),this.stats_=qu(n),this.urlFn=a=>(this.appCheckToken&&(a[Ma]=this.appCheckToken),Sm(n,wm,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Jv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a1)),Fv(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ju((...s)=>{const[o,l,a,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Zd)this.id=l,this.password=a;else if(o===Xv)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Zd]="t",r[xm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[t1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hm]=Yu,this.transportSessionId&&(r[fm]=this.transportSessionId),this.lastSessionId&&(r[ym]=this.lastSessionId),this.applicationId&&(r[_m]=this.applicationId),this.appCheckToken&&(r[Ma]=this.appCheckToken),typeof location<"u"&&location.hostname&&gm.test(location.hostname)&&(r[pm]=mm);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kn.forceAllow_=!0}static forceDisallow(){Kn.forceDisallow_=!0}static isAvailable(){return Kn.forceAllow_?!0:!Kn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zv()&&!$v()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Qp(n),i=cm(r,o1);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[s1]="t",r[Em]=e,r[km]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=de(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ju{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Lv(),window[Zv+this.uniqueCallbackIdentifier]=e,window[e1+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ju.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Se("frame writing exception"),l.stack&&Se(l.stack),Se(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Se("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Em]=this.myID,e[km]=this.myPW,e[xm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Im+r.length<=Tm;){const o=this.pendingSegs.shift();r=r+"&"+n1+i+"="+o.seg+"&"+r1+i+"="+o.ts+"&"+i1+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(l1)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Se("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=16384,c1=45e3;let eo=null;typeof MozWebSocket<"u"?eo=MozWebSocket:typeof WebSocket<"u"&&(eo=WebSocket);class ot{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$i(this.connId),this.stats_=qu(n),this.connURL=ot.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[hm]=Yu,typeof location<"u"&&location.hostname&&gm.test(location.hostname)&&(o[pm]=mm),n&&(o[fm]=n),r&&(o[ym]=r),i&&(o[Ma]=i),s&&(o[_m]=s),Sm(e,vm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vn.set("previous_websocket_failure",!0);try{let r;Xp(),this.mySock=new eo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ot.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&eo!==null&&!ot.forceDisallow_}static previouslyFailed(){return vn.isInMemoryStorage||vn.get("previous_websocket_failure")===!0}markConnectionHealthy(){vn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=_i(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cm(n,u1);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(c1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ot.responsesRequiredToBeHealthy=2;ot.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{static get ALL_TRANSPORTS(){return[Kn,ot]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ot&&ot.isAvailable();let r=n&&!ot.previouslyFailed();if(e.webSocketOnly&&(n||Ae("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ot];else{const i=this.transports_=[];for(const s of Ci.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ci.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ci.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=6e4,h1=5e3,f1=10*1024,p1=100*1024,Pl="t",eh="d",m1="s",th="r",g1="e",nh="o",rh="a",ih="n",sh="p",y1="h";class _1{constructor(e,n,r,i,s,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$i("c:"+this.id+":"),this.transportManager_=new Ci(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Jr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>p1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>f1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Pl in e){const n=e[Pl];n===rh?this.upgradeIfSecondaryHealthy_():n===th?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===nh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ar("t",e),r=Ar("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:sh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:rh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ih,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ar("t",e),r=Ar("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ar(Pl,e);if(eh in e){const r=e[eh];if(n===y1){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===ih){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===m1?this.onConnectionShutdown_(r):n===th?this.onReset_(r):n===g1?La("Server Error: "+r):n===nh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):La("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yu!==r&&Ae("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Jr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(d1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(h1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:sh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){E(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Rm{static getInstance(){return new to}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=32,lh=768;class V{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function B(){return new V("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rn(t){return t.pieces_.length-t.pieceNum_}function Y(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function Xu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function v1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Si(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Pm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function ie(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new V(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function Oe(t,e){const n=M(t),r=M(e);if(n===null)return e;if(n===r)return Oe(Y(t),Y(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function w1(t,e){const n=Si(t,0),r=Si(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Dn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Zu(t,e){if(rn(t)!==rn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Je(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(rn(t)>rn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class C1{constructor(e,n){this.errorPrefix_=n,this.parts_=Si(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lo(this.parts_[r]);Om(this)}}function S1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lo(e),Om(t)}function E1(t){const e=t.parts_.pop();t.byteLength_-=Lo(e),t.parts_.length>0&&(t.byteLength_-=1)}function Om(t){if(t.byteLength_>lh)throw new Error(t.errorPrefix_+"has a key path longer than "+lh+" bytes ("+t.byteLength_+").");if(t.parts_.length>oh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+oh+") or object contains a cycle "+mn(t))}function mn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Rm{static getInstance(){return new ec}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=1e3,k1=60*5*1e3,ah=30*1e3,x1=1.3,T1=3e4,I1="server_kill",uh=3;class Tt extends Nm{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Tt.nextPersistentConnectionId_++,this.log_=$i("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lr,this.maxReconnectDelay_=k1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Xp())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ec.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&to.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(de(s)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Fi,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Tt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&yt(e,"w")){const r=dr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Ae(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||p0(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ah)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=f0(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+de(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):La("Unrecognized action received from server: "+de(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>T1&&(this.reconnectDelay_=Lr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*x1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Tt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){E(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Se("getToken() completed but was canceled"):(Se("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new _1(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Ae(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(I1)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ae(d),a())}}}interrupt(e){Se("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Se("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jd(this.interruptReasons_)&&(this.reconnectDelay_=Lr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Ku(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new V(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Se("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uh&&(this.reconnectDelay_=ah,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Se("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+lm.replace(/\./g,"-")]=1,Jp()?e["framework.cordova"]=1:l0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=to.getInstance().currentlyOnline();return jd(this.interruptReasons_)&&e}}Tt.nextPersistentConnectionId_=0;Tt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new b(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new b(hr,e),i=new b(hr,n);return this.compare(r,i)!==0}minPost(){return b.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds;class Dm extends Mo{static get __EMPTY_NODE(){return ds}static set __EMPTY_NODE(e){ds=e}compare(e,n){return Dn(e.name,n.name)}isDefinedOn(e){throw wr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return b.MIN}maxPost(){return new b(In,ds)}makePost(e,n){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new b(e,ds)}toString(){return".key"}}const rr=new Dm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ge{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ge.RED,this.left=i??je.EMPTY_NODE,this.right=s??je.EMPTY_NODE}copy(e,n,r,i,s){return new ge(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return je.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return je.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ge.RED=!0;ge.BLACK=!1;class N1{copy(e,n,r,i,s){return this}insert(e,n,r){return new ge(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class je{constructor(e,n=je.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new je(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ge.BLACK,null,null))}remove(e){return new je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ge.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new hs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new hs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new hs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new hs(this.root_,null,this.comparator_,!0,e)}}je.EMPTY_NODE=new N1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e){return Dn(t.name,e.name)}function tc(t,e){return Dn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba;function P1(t){ba=t}const Am=function(t){return typeof t=="number"?"number:"+dm(t):"string:"+t},Lm=function(t){if(t.isLeafNode()){const e=t.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yt(e,".sv"),"Priority must be a string or number.")}else E(t===ba||t.isEmpty(),"priority of unexpected type.");E(t===ba||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch;class pe{static set __childrenNodeConstructor(e){ch=e}static get __childrenNodeConstructor(){return ch}constructor(e,n=pe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Lm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return F(e)?this:M(e)===".priority"?this.priorityNode_:pe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:pe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=M(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(E(r!==".priority"||rn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,pe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Y(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Am(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=dm(this.value_):e+=this.value_,this.lazyHash_=um(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pe.__childrenNodeConstructor?-1:(E(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=pe.VALUE_TYPE_ORDER.indexOf(n),s=pe.VALUE_TYPE_ORDER.indexOf(r);return E(i>=0,"Unknown leaf type: "+n),E(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}pe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mm,bm;function O1(t){Mm=t}function D1(t){bm=t}class A1 extends Mo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Dn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return b.MIN}maxPost(){return new b(In,new pe("[PRIORITY-POST]",bm))}makePost(e,n){const r=Mm(e);return new b(n,new pe("[PRIORITY-POST]",r))}toString(){return".priority"}}const se=new A1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=Math.log(2);class M1{constructor(e){const n=s=>parseInt(Math.log(s)/L1,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const no=function(t,e,n,r){t.sort(e);const i=function(a,u){const h=u-a;let d,f;if(h===0)return null;if(h===1)return d=t[a],f=n?n(d):d,new ge(f,d.node,ge.BLACK,null,null);{const y=parseInt(h/2,10)+a,_=i(a,y),v=i(y+1,u);return d=t[y],f=n?n(d):d,new ge(f,d.node,ge.BLACK,_,v)}},s=function(a){let u=null,h=null,d=t.length;const f=function(_,v){const k=d-_,m=d;d-=_;const c=i(k+1,m),g=t[k],w=n?n(g):g;y(new ge(w,g.node,v,null,c))},y=function(_){u?(u.left=_,u=_):(h=_,u=_)};for(let _=0;_<a.count;++_){const v=a.nextBitIsOne(),k=Math.pow(2,a.count-(_+1));v?f(k,ge.BLACK):(f(k,ge.BLACK),f(k,ge.RED))}return h},o=new M1(t.length),l=s(o);return new je(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol;const Mn={};class kt{static get Default(){return E(Mn&&se,"ChildrenNode.ts has not been loaded"),Ol=Ol||new kt({".priority":Mn},{".priority":se}),Ol}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=dr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof je?n:null}hasIndex(e){return yt(this.indexSet_,e.toString())}addIndex(e,n){E(e!==rr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(b.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=no(r,e.getCompare()):l=Mn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const h=Object.assign({},this.indexes_);return h[a]=l,new kt(h,u)}addToIndexes(e,n){const r=Js(this.indexes_,(i,s)=>{const o=dr(this.indexSet_,s);if(E(o,"Missing index implementation for "+s),i===Mn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(b.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),no(l,o.getCompare())}else return Mn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new b(e.name,l))),a.insert(e,e.node)}});return new kt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Js(this.indexes_,i=>{if(i===Mn)return i;{const s=n.get(e.name);return s?i.remove(new b(e.name,s)):i}});return new kt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mr;class O{static get EMPTY_NODE(){return Mr||(Mr=new O(new je(tc),null,kt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Lm(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Mr}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Mr:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(Y(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(E(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new b(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Mr:this.priorityNode_;return new O(i,o,s)}}updateChild(e,n){const r=M(e);if(r===null)return n;{E(M(e)!==".priority"||rn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Y(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(se,(o,l)=>{n[o]=l.val(e),r++,s&&O.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Am(this.getPriority().val())+":"),this.forEachChild(se,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":um(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new b(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new b(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new b(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,b.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,b.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ui?-1:0}withIndex(e){if(e===rr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===rr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(se),i=n.getIterator(se);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===rr?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class b1 extends O{constructor(){super(new je(tc),O.EMPTY_NODE,kt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const Ui=new b1;Object.defineProperties(b,{MIN:{value:new b(hr,O.EMPTY_NODE)},MAX:{value:new b(In,Ui)}});Dm.__EMPTY_NODE=O.EMPTY_NODE;pe.__childrenNodeConstructor=O;P1(Ui);D1(Ui);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=!0;function ce(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new pe(n,ce(e))}if(!(t instanceof Array)&&F1){const n=[];let r=!1;if(xe(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ce(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new b(o,a)))}}),n.length===0)return O.EMPTY_NODE;const s=no(n,R1,o=>o.name,tc);if(r){const o=no(n,se.getCompare());return new O(s,ce(e),new kt({".priority":o},{".priority":se}))}else return new O(s,ce(e),kt.Default)}else{let n=O.EMPTY_NODE;return xe(t,(r,i)=>{if(yt(t,r)&&r.substring(0,1)!=="."){const s=ce(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ce(e))}}O1(ce);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends Mo{constructor(e){super(),this.indexPath_=e,E(!F(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Dn(e.name,n.name):s}makePost(e,n){const r=ce(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new b(n,i)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,Ui);return new b(In,e)}toString(){return Si(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1 extends Mo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Dn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return b.MIN}maxPost(){return b.MAX}makePost(e,n){const r=ce(e);return new b(n,r)}toString(){return".value"}}const $1=new z1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){return{type:"value",snapshotNode:t}}function fr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ei(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ki(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function U1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ei(n,l)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(fr(n,r)):o.trackChildChange(ki(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(se,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ei(i,s))}),n.isLeafNode()||n.forEachChild(se,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ki(i,s,o))}else r.trackChildChange(fr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.indexedFilter_=new nc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xi.getStartPost_(e),this.endPost_=xi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new b(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);const s=this;return n.forEachChild(se,(o,l)=>{s.matches(new b(o,l))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new xi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new b(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,y)=>d(y,f)}else o=this.index_.getCompare();const l=e;E(l.numChildren()===this.limit_,"");const a=new b(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,a);if(h&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(ki(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ei(n,d));const v=l.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(fr(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:h&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Ei(u.name,u.node)),s.trackChildChange(fr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hr}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:In}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===se}copy(){const e=new rc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function W1(t){return t.loadsAllData()?new nc(t.getIndex()):t.hasLimit()?new B1(t):new xi(t)}function dh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===se?n="$priority":t.index_===$1?n="$value":t.index_===rr?n="$key":(E(t.index_ instanceof j1,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=de(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=de(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+de(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=de(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+de(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function hh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==se&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Nm{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$i("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=ro.getListenId_(e,r),l={};this.listens_[o]=l;const a=dh(e._queryParams);this.restRequest_(s+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),dr(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=ro.getListenId_(e,n);delete this.listens_[r]}get(e){const n=dh(e._queryParams),r=e._path.toString(),i=new Fi;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+m0(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=_i(l.responseText)}catch{Ae("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Ae("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(){return{value:null,children:new Map}}function jm(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=M(e);t.children.has(r)||t.children.set(r,io());const i=t.children.get(r);e=Y(e),jm(i,e,n)}}function Fa(t,e,n){t.value!==null?n(e,t.value):V1(t,(r,i)=>{const s=new V(e.toString()+"/"+r);Fa(i,s,n)})}function V1(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&xe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=10*1e3,Q1=30*1e3,K1=5*60*1e3;class Y1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new G1(e);const r=fh+(Q1-fh)*Math.random();Jr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;xe(e,(i,s)=>{s>0&&yt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Jr(this.reportStats_.bind(this),Math.floor(Math.random()*2*K1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(lt||(lt={}));function ic(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function oc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=lt.ACK_USER_WRITE,this.source=ic()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new V(e));return new so(B(),n,this.revert)}}else return E(M(this.path)===e,"operationForChild called for unrelated child."),new so(Y(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.source=e,this.path=n,this.type=lt.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new Ti(this.source,B()):new Ti(this.source,Y(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=lt.OVERWRITE}operationForChild(e){return F(this.path)?new Nn(this.source,B(),this.snap.getImmediateChild(e)):new Nn(this.source,Y(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=lt.MERGE}operationForChild(e){if(F(this.path)){const n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new Nn(this.source,B(),n.value):new pr(this.source,B(),n)}else return E(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pr(this.source,Y(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function J1(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(U1(o.childName,o.snapshotNode))}),br(t,i,"child_removed",e,r,n),br(t,i,"child_added",e,r,n),br(t,i,"child_moved",s,r,n),br(t,i,"child_changed",e,r,n),br(t,i,"value",e,r,n),i}function br(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>Z1(t,l,a)),o.forEach(l=>{const a=X1(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function X1(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Z1(t,e,n){if(e.childName==null||n.childName==null)throw wr("Should only compare child_ events.");const r=new b(e.childName,e.snapshotNode),i=new b(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){return{eventCache:t,serverCache:e}}function Xr(t,e,n,r){return bo(new sn(e,n,r),t.serverCache)}function zm(t,e,n,r){return bo(t.eventCache,new sn(e,n,r))}function oo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Rn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl;const ew=()=>(Dl||(Dl=new je(jv)),Dl);class Q{static fromObject(e){let n=new Q(null);return xe(e,(r,i)=>{n=n.set(new V(r),i)}),n}constructor(e,n=ew()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(F(e))return null;{const r=M(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Y(e),n);return s!=null?{path:ie(new V(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const n=M(e),r=this.children.get(n);return r!==null?r.subtree(Y(e)):new Q(null)}}set(e,n){if(F(e))return new Q(n,this.children);{const r=M(e),s=(this.children.get(r)||new Q(null)).set(Y(e),n),o=this.children.insert(r,s);return new Q(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new Q(null):new Q(null,this.children);{const n=M(e),r=this.children.get(n);if(r){const i=r.remove(Y(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Q(null):new Q(this.value,s)}else return this}}get(e){if(F(e))return this.value;{const n=M(e),r=this.children.get(n);return r?r.get(Y(e)):null}}setTree(e,n){if(F(e))return n;{const r=M(e),s=(this.children.get(r)||new Q(null)).setTree(Y(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Q(this.value,o)}}fold(e){return this.fold_(B(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ie(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(F(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(Y(e),ie(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,r){if(F(e))return this;{this.value&&r(n,this.value);const i=M(e),s=this.children.get(i);return s?s.foreachOnPath_(Y(e),ie(n,i),r):new Q(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ie(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.writeTree_=e}static empty(){return new ct(new Q(null))}}function Zr(t,e,n){if(F(e))return new ct(new Q(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Oe(i,e);return s=s.updateChild(o,n),new ct(t.writeTree_.set(i,s))}else{const i=new Q(n),s=t.writeTree_.setTree(e,i);return new ct(s)}}}function ja(t,e,n){let r=t;return xe(n,(i,s)=>{r=Zr(r,ie(e,i),s)}),r}function ph(t,e){if(F(e))return ct.empty();{const n=t.writeTree_.setTree(e,new Q(null));return new ct(n)}}function za(t,e){return An(t,e)!=null}function An(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Oe(n.path,e)):null}function mh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(se,(r,i)=>{e.push(new b(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new b(r,i.value))}),e}function Zt(t,e){if(F(e))return t;{const n=An(t,e);return n!=null?new ct(new Q(n)):new ct(t.writeTree_.subtree(e))}}function $a(t){return t.writeTree_.isEmpty()}function mr(t,e){return $m(B(),t.writeTree_,e)}function $m(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(E(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=$m(ie(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ie(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e){return Hm(e,t)}function tw(t,e,n,r,i){E(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zr(t.visibleWrites,e,n)),t.lastWriteId=r}function nw(t,e,n,r){E(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=ja(t.visibleWrites,e,n),t.lastWriteId=r}function rw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function iw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);E(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&sw(l,r.path)?i=!1:Je(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return ow(t),!0;if(r.snap)t.visibleWrites=ph(t.visibleWrites,r.path);else{const l=r.children;xe(l,a=>{t.visibleWrites=ph(t.visibleWrites,ie(r.path,a))})}return!0}else return!1}function sw(t,e){if(t.snap)return Je(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Je(ie(t.path,n),e))return!0;return!1}function ow(t){t.visibleWrites=Um(t.allWrites,lw,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function lw(t){return t.visible}function Um(t,e,n){let r=ct.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)Je(n,o)?(l=Oe(n,o),r=Zr(r,l,s.snap)):Je(o,n)&&(l=Oe(o,n),r=Zr(r,B(),s.snap.getChild(l)));else if(s.children){if(Je(n,o))l=Oe(n,o),r=ja(r,l,s.children);else if(Je(o,n))if(l=Oe(o,n),F(l))r=ja(r,B(),s.children);else{const a=dr(s.children,M(l));if(a){const u=a.getChild(Y(l));r=Zr(r,B(),u)}}}else throw wr("WriteRecord should have .snap or .children")}}return r}function Bm(t,e,n,r,i){if(!r&&!i){const s=An(t.visibleWrites,e);if(s!=null)return s;{const o=Zt(t.visibleWrites,e);if($a(o))return n;if(n==null&&!za(o,B()))return null;{const l=n||O.EMPTY_NODE;return mr(o,l)}}}else{const s=Zt(t.visibleWrites,e);if(!i&&$a(s))return n;if(!i&&n==null&&!za(s,B()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Je(u.path,e)||Je(e,u.path))},l=Um(t.allWrites,o,e),a=n||O.EMPTY_NODE;return mr(l,a)}}}function aw(t,e,n){let r=O.EMPTY_NODE;const i=An(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(se,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Zt(t.visibleWrites,e);return n.forEachChild(se,(o,l)=>{const a=mr(Zt(s,new V(o)),l);r=r.updateImmediateChild(o,a)}),mh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Zt(t.visibleWrites,e);return mh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function uw(t,e,n,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ie(e,n);if(za(t.visibleWrites,s))return null;{const o=Zt(t.visibleWrites,s);return $a(o)?i.getChild(n):mr(o,i.getChild(n))}}function cw(t,e,n,r){const i=ie(e,n),s=An(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Zt(t.visibleWrites,i);return mr(o,r.getNode().getImmediateChild(n))}else return null}function dw(t,e){return An(t.visibleWrites,e)}function hw(t,e,n,r,i,s,o){let l;const a=Zt(t.visibleWrites,e),u=An(a,B());if(u!=null)l=u;else if(n!=null)l=mr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),f=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=f.getNext();for(;y&&h.length<i;)d(y,r)!==0&&h.push(y),y=f.getNext();return h}else return[]}function fw(){return{visibleWrites:ct.empty(),allWrites:[],lastWriteId:-1}}function lo(t,e,n,r){return Bm(t.writeTree,t.treePath,e,n,r)}function lc(t,e){return aw(t.writeTree,t.treePath,e)}function gh(t,e,n,r){return uw(t.writeTree,t.treePath,e,n,r)}function ao(t,e){return dw(t.writeTree,ie(t.treePath,e))}function pw(t,e,n,r,i,s){return hw(t.writeTree,t.treePath,e,n,r,i,s)}function ac(t,e,n){return cw(t.writeTree,t.treePath,e,n)}function Wm(t,e){return Hm(ie(t.treePath,e),t.writeTree)}function Hm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;E(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ki(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ei(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,fr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ki(r,e.snapshotNode,i.oldSnap));else throw wr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Vm=new gw;class uc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new sn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ac(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rn(this.viewCache_),s=pw(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){return{filter:t}}function _w(t,e){E(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vw(t,e,n,r,i){const s=new mw;let o,l;if(n.type===lt.OVERWRITE){const u=n;u.source.fromUser?o=Ua(t,e,u.path,u.snap,r,i,s):(E(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!F(u.path),o=uo(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===lt.MERGE){const u=n;u.source.fromUser?o=Cw(t,e,u.path,u.children,r,i,s):(E(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Ba(t,e,u.path,u.children,r,i,l,s))}else if(n.type===lt.ACK_USER_WRITE){const u=n;u.revert?o=kw(t,e,u.path,r,i,s):o=Sw(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===lt.LISTEN_COMPLETE)o=Ew(t,e,n.path,r,s);else throw wr("Unknown operation type: "+n.type);const a=s.getChanges();return ww(e,o,a),{viewCache:o,changes:a}}function ww(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oo(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Fm(oo(e)))}}function Gm(t,e,n,r,i,s){const o=e.eventCache;if(ao(r,n)!=null)return e;{let l,a;if(F(n))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Rn(e),h=u instanceof O?u:O.EMPTY_NODE,d=lc(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=lo(r,Rn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=M(n);if(u===".priority"){E(rn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=gh(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=Y(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=gh(r,n,o.getNode(),a);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=ac(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,i,s):l=o.getNode()}}return Xr(e,l,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function uo(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(F(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const y=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),y,null)}else{const y=M(n);if(!a.isCompleteForPath(n)&&rn(n)>1)return e;const _=Y(n),k=a.getNode().getImmediateChild(y).updateChild(_,r);y===".priority"?u=h.updatePriority(a.getNode(),k):u=h.updateChild(a.getNode(),y,k,_,Vm,null)}const d=zm(e,u,a.isFullyInitialized()||F(n),h.filtersNodes()),f=new uc(i,d,s);return Gm(t,d,n,i,f,l)}function Ua(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const h=new uc(i,e,s);if(F(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Xr(e,u,!0,t.filter.filtersNodes());else{const d=M(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Xr(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=Y(n),y=l.getNode().getImmediateChild(d);let _;if(F(f))_=r;else{const v=h.getCompleteChild(d);v!=null?Xu(f)===".priority"&&v.getChild(Pm(f)).isEmpty()?_=v:_=v.updateChild(f,r):_=O.EMPTY_NODE}if(y.equals(_))a=e;else{const v=t.filter.updateChild(l.getNode(),d,_,f,h,o);a=Xr(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function yh(t,e){return t.eventCache.isCompleteForChild(e)}function Cw(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const h=ie(n,a);yh(e,M(h))&&(l=Ua(t,l,h,u,i,s,o))}),r.foreach((a,u)=>{const h=ie(n,a);yh(e,M(h))||(l=Ua(t,l,h,u,i,s,o))}),l}function _h(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ba(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;F(n)?u=r:u=new Q(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),_=_h(t,y,f);a=uo(t,a,new V(d),_,i,s,o,l)}}),u.children.inorderTraversal((d,f)=>{const y=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!y){const _=e.serverCache.getNode().getImmediateChild(d),v=_h(t,_,f);a=uo(t,a,new V(d),v,i,s,o,l)}}),a}function Sw(t,e,n,r,i,s,o){if(ao(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(F(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return uo(t,e,n,a.getNode().getChild(n),i,s,l,o);if(F(n)){let u=new Q(null);return a.getNode().forEachChild(rr,(h,d)=>{u=u.set(new V(h),d)}),Ba(t,e,n,u,i,s,l,o)}else return e}else{let u=new Q(null);return r.foreach((h,d)=>{const f=ie(n,h);a.isCompleteForPath(f)&&(u=u.set(h,a.getNode().getChild(f)))}),Ba(t,e,n,u,i,s,l,o)}}function Ew(t,e,n,r,i){const s=e.serverCache,o=zm(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return Gm(t,o,n,r,Vm,i)}function kw(t,e,n,r,i,s){let o;if(ao(r,n)!=null)return e;{const l=new uc(r,e,i),a=e.eventCache.getNode();let u;if(F(n)||M(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=lo(r,Rn(e));else{const d=e.serverCache.getNode();E(d instanceof O,"serverChildren would be complete if leaf node"),h=lc(r,d)}h=h,u=t.filter.updateFullNode(a,h,s)}else{const h=M(n);let d=ac(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,Y(n),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,O.EMPTY_NODE,Y(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lo(r,Rn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||ao(r,B())!=null,Xr(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new nc(r.getIndex()),s=W1(r);this.processor_=yw(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(O.EMPTY_NODE,l.getNode(),null),h=new sn(a,o.isFullyInitialized(),i.filtersNodes()),d=new sn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=bo(d,h),this.eventGenerator_=new q1(this.query_)}get query(){return this.query_}}function Tw(t){return t.viewCache_.serverCache.getNode()}function Iw(t){return oo(t.viewCache_)}function Nw(t,e){const n=Rn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function vh(t){return t.eventRegistrations_.length===0}function Rw(t,e){t.eventRegistrations_.push(e)}function wh(t,e,n){const r=[];if(n){E(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Ch(t,e,n,r){e.type===lt.MERGE&&e.source.queryId!==null&&(E(Rn(t.viewCache_),"We should always have a full cache before handling merges"),E(oo(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=vw(t.processor_,i,e,n,r);return _w(t.processor_,s.viewCache),E(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Qm(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Pw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(se,(s,o)=>{r.push(fr(s,o))}),n.isFullyInitialized()&&r.push(Fm(n.getNode())),Qm(t,r,n.getNode(),e)}function Qm(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return J1(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co;class Km{constructor(){this.views=new Map}}function Ow(t){E(!co,"__referenceConstructor has already been defined"),co=t}function Dw(){return E(co,"Reference.ts has not been loaded"),co}function Aw(t){return t.views.size===0}function cc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return E(s!=null,"SyncTree gave us an op for an invalid query."),Ch(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Ch(o,e,n,r));return s}}function Ym(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=lo(n,i?r:null),a=!1;l?a=!0:r instanceof O?(l=lc(n,r),a=!1):(l=O.EMPTY_NODE,a=!1);const u=bo(new sn(l,a,!1),new sn(r,i,!1));return new xw(e,u)}return o}function Lw(t,e,n,r,i,s){const o=Ym(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Rw(o,n),Pw(o,n)}function Mw(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=on(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(wh(u,n,r)),vh(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(wh(a,n,r)),vh(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!on(t)&&s.push(new(Dw())(e._repo,e._path)),{removed:s,events:o}}function qm(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function en(t,e){let n=null;for(const r of t.views.values())n=n||Nw(r,e);return n}function Jm(t,e){if(e._queryParams.loadsAllData())return jo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Xm(t,e){return Jm(t,e)!=null}function on(t){return jo(t)!=null}function jo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho;function bw(t){E(!ho,"__referenceConstructor has already been defined"),ho=t}function Fw(){return E(ho,"Reference.ts has not been loaded"),ho}let jw=1;class Sh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Q(null),this.pendingWriteTree_=fw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zm(t,e,n,r,i){return tw(t.pendingWriteTree_,e,n,r,i),i?Er(t,new Nn(ic(),e,n)):[]}function zw(t,e,n,r){nw(t.pendingWriteTree_,e,n,r);const i=Q.fromObject(n);return Er(t,new pr(ic(),e,i))}function Bt(t,e,n=!1){const r=rw(t.pendingWriteTree_,e);if(iw(t.pendingWriteTree_,e)){let s=new Q(null);return r.snap!=null?s=s.set(B(),!0):xe(r.children,o=>{s=s.set(new V(o),!0)}),Er(t,new so(r.path,s,n))}else return[]}function Bi(t,e,n){return Er(t,new Nn(sc(),e,n))}function $w(t,e,n){const r=Q.fromObject(n);return Er(t,new pr(sc(),e,r))}function Uw(t,e){return Er(t,new Ti(sc(),e))}function Bw(t,e,n){const r=hc(t,n);if(r){const i=fc(r),s=i.path,o=i.queryId,l=Oe(s,e),a=new Ti(oc(o),l);return pc(t,s,a)}else return[]}function fo(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Xm(o,e))){const a=Mw(o,e,n,r);Aw(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,y)=>on(y));if(h&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const y=Vw(f);for(let _=0;_<y.length;++_){const v=y[_],k=v.query,m=rg(t,v);t.listenProvider_.startListening(ei(k),Ii(t,k),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(ei(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(zo(f));t.listenProvider_.stopListening(ei(f),y)}))}Gw(t,u)}return l}function eg(t,e,n,r){const i=hc(t,r);if(i!=null){const s=fc(i),o=s.path,l=s.queryId,a=Oe(o,e),u=new Nn(oc(l),a,n);return pc(t,o,u)}else return[]}function Ww(t,e,n,r){const i=hc(t,r);if(i){const s=fc(i),o=s.path,l=s.queryId,a=Oe(o,e),u=Q.fromObject(n),h=new pr(oc(l),a,u);return pc(t,o,h)}else return[]}function Wa(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,y)=>{const _=Oe(f,i);s=s||en(y,_),o=o||on(y)});let l=t.syncPointTree_.get(i);l?(o=o||on(l),s=s||en(l,B())):(l=new Km,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,_)=>{const v=en(_,B());v&&(s=s.updateImmediateChild(y,v))}));const u=Xm(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=zo(e);E(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=Qw();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const h=Fo(t.pendingWriteTree_,i);let d=Lw(l,e,n,h,s,a);if(!u&&!o&&!r){const f=Jm(l,e);d=d.concat(Kw(t,e,f))}return d}function dc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Oe(o,e),u=en(l,a);if(u)return u});return Bm(i,e,s,n,!0)}function Hw(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Oe(u,n);r=r||en(h,d)});let i=t.syncPointTree_.get(n);i?r=r||en(i,B()):(i=new Km,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new sn(r,!0,!1):null,l=Fo(t.pendingWriteTree_,e._path),a=Ym(i,e,l,s?o.getNode():O.EMPTY_NODE,s);return Iw(a)}function Er(t,e){return tg(e,t.syncPointTree_,null,Fo(t.pendingWriteTree_,B()))}function tg(t,e,n,r){if(F(t.path))return ng(t,e,n,r);{const i=e.get(B());n==null&&i!=null&&(n=en(i,B()));let s=[];const o=M(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=Wm(r,o);s=s.concat(tg(l,a,u,h))}return i&&(s=s.concat(cc(i,t,r,n))),s}}function ng(t,e,n,r){const i=e.get(B());n==null&&i!=null&&(n=en(i,B()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Wm(r,o),h=t.operationForChild(o);h&&(s=s.concat(ng(h,l,a,u)))}),i&&(s=s.concat(cc(i,t,r,n))),s}function rg(t,e){const n=e.query,r=Ii(t,n);return{hashFn:()=>(Tw(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Bw(t,n._path,r):Uw(t,n._path);{const s=Uv(i,n);return fo(t,n,null,s)}}}}function Ii(t,e){const n=zo(e);return t.queryToTagMap.get(n)}function zo(t){return t._path.toString()+"$"+t._queryIdentifier}function hc(t,e){return t.tagToQueryMap.get(e)}function fc(t){const e=t.indexOf("$");return E(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function pc(t,e,n){const r=t.syncPointTree_.get(e);E(r,"Missing sync point for query tag that we're tracking");const i=Fo(t.pendingWriteTree_,e);return cc(r,n,i,null)}function Vw(t){return t.fold((e,n,r)=>{if(n&&on(n))return[jo(n)];{let i=[];return n&&(i=qm(n)),xe(r,(s,o)=>{i=i.concat(o)}),i}})}function ei(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Fw())(t._repo,t._path):t}function Gw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=zo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Qw(){return jw++}function Kw(t,e,n){const r=e._path,i=Ii(t,e),s=rg(t,n),o=t.listenProvider_.startListening(ei(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)E(!on(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!F(u)&&h&&on(h))return[jo(h).query];{let f=[];return h&&(f=f.concat(qm(h).map(y=>y.query))),xe(d,(y,_)=>{f=f.concat(_)}),f}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(ei(h),Ii(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new mc(n)}node(){return this.node_}}class gc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ie(this.path_,e);return new gc(this.syncTree_,n)}node(){return dc(this.syncTree_,this.path_)}}const Yw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Eh=function(t,e,n){if(!t||typeof t!="object")return t;if(E(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return qw(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Jw(t[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},qw=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:E(!1,"Unexpected server value: "+t)}},Jw=function(t,e,n){t.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);const i=e.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},ig=function(t,e,n,r){return yc(e,new gc(n,t),r)},sg=function(t,e,n){return yc(t,new mc(e),n)};function yc(t,e,n){const r=t.getPriority().val(),i=Eh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Eh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new pe(l,ce(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new pe(i))),o.forEachChild(se,(l,a)=>{const u=yc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function vc(t,e){let n=e instanceof V?e:new V(e),r=t,i=M(n);for(;i!==null;){const s=dr(r.node.children,i)||{children:{},childCount:0};r=new _c(i,r,s),n=Y(n),i=M(n)}return r}function kr(t){return t.node.value}function og(t,e){t.node.value=e,Ha(t)}function lg(t){return t.node.childCount>0}function Xw(t){return kr(t)===void 0&&!lg(t)}function $o(t,e){xe(t.node.children,(n,r)=>{e(new _c(n,t,r))})}function ag(t,e,n,r){n&&!r&&e(t),$o(t,i=>{ag(i,e,!0,r)}),n&&r&&e(t)}function Zw(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Wi(t){return new V(t.parent===null?t.name:Wi(t.parent)+"/"+t.name)}function Ha(t){t.parent!==null&&eC(t.parent,t.name,t)}function eC(t,e,n){const r=Xw(n),i=yt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ha(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ha(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/[\[\].#$\/\u0000-\u001F\u007F]/,nC=/[\[\].#$\u0000-\u001F\u007F]/,Al=10*1024*1024,wc=function(t){return typeof t=="string"&&t.length!==0&&!tC.test(t)},ug=function(t){return typeof t=="string"&&t.length!==0&&!nC.test(t)},rC=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ug(t)},iC=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Qu(t)||t&&typeof t=="object"&&yt(t,".sv")},sC=function(t,e,n,r){Uo(Ao(t,"value"),e,n)},Uo=function(t,e,n){const r=n instanceof V?new C1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mn(r));if(typeof e=="function")throw new Error(t+"contains a function "+mn(r)+" with contents = "+e.toString());if(Qu(e))throw new Error(t+"contains "+e.toString()+" "+mn(r));if(typeof e=="string"&&e.length>Al/3&&Lo(e)>Al)throw new Error(t+"contains a string greater than "+Al+" utf8 bytes "+mn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(xe(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!wc(o)))throw new Error(t+" contains an invalid key ("+o+") "+mn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);S1(r,o),Uo(t,l,r),E1(r)}),i&&s)throw new Error(t+' contains ".value" child '+mn(r)+" in addition to actual children.")}},oC=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Si(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!wc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(w1);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Je(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},lC=function(t,e,n,r){const i=Ao(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];xe(e,(o,l)=>{const a=new V(o);if(Uo(i,l,ie(n,a)),Xu(a)===".priority"&&!iC(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),oC(i,s)},cg=function(t,e,n,r){if(!ug(n))throw new Error(Ao(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aC=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cg(t,e,n)},uC=function(t,e){if(M(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},cC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!wc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!rC(n))throw new Error(Ao(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bo(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Zu(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function dg(t,e,n){Bo(t,n),hg(t,r=>Zu(r,e))}function tt(t,e,n){Bo(t,n),hg(t,r=>Je(r,e)||Je(e,r))}function hg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(hC(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function hC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();qr&&Se("event: "+n.toString()),Sr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="repo_interrupt",pC=25;class mC{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=io(),this.transactionQueueTree_=new _c,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gC(t,e,n){if(t.stats_=qu(t.repoInfo_),t.forceRestClient_||Vv())t.server_=new ro(t.repoInfo_,(r,i,s,o)=>{kh(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{de(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Tt(t.repoInfo_,e,(r,i,s,o)=>{kh(t,r,i,s,o)},r=>{xh(t,r)},r=>{_C(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=qv(t.repoInfo_,()=>new Y1(t.stats_,t.server_)),t.infoData_=new H1,t.infoSyncTree_=new Sh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Bi(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Cc(t,"connected",!1),t.serverSyncTree_=new Sh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);tt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function yC(t){const n=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Wo(t){return Yw({timestamp:yC(t)})}function kh(t,e,n,r,i){t.dataUpdateCount++;const s=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Js(n,u=>ce(u));o=Ww(t.serverSyncTree_,s,a,i)}else{const a=ce(n);o=eg(t.serverSyncTree_,s,a,i)}else if(r){const a=Js(n,u=>ce(u));o=$w(t.serverSyncTree_,s,a)}else{const a=ce(n);o=Bi(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=gr(t,s)),tt(t.eventQueue_,l,o)}function xh(t,e){Cc(t,"connected",e),e===!1&&SC(t)}function _C(t,e){xe(e,(n,r)=>{Cc(t,n,r)})}function Cc(t,e,n){const r=new V("/.info/"+e),i=ce(n);t.infoData_.updateSnapshot(r,i);const s=Bi(t.infoSyncTree_,r,i);tt(t.eventQueue_,r,s)}function Sc(t){return t.nextWriteId_++}function vC(t,e,n){const r=Hw(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=ce(i).withIndex(e._queryParams.getIndex());Wa(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Bi(t.serverSyncTree_,e._path,s);else{const l=Ii(t.serverSyncTree_,e);o=eg(t.serverSyncTree_,e._path,s,l)}return tt(t.eventQueue_,e._path,o),fo(t.serverSyncTree_,e,n,null,!0),s},i=>(Hi(t,"get for query "+de(e)+" failed: "+i),Promise.reject(new Error(i))))}function wC(t,e,n,r,i){Hi(t,"set",{path:e.toString(),value:n,priority:r});const s=Wo(t),o=ce(n,r),l=dc(t.serverSyncTree_,e),a=sg(o,l,s),u=Sc(t),h=Zm(t.serverSyncTree_,e,a,u,!0);Bo(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const _=f==="ok";_||Ae("set at "+e+" failed: "+f);const v=Bt(t.serverSyncTree_,u,!_);tt(t.eventQueue_,e,v),Va(t,i,f,y)});const d=kc(t,e);gr(t,d),tt(t.eventQueue_,d,[])}function CC(t,e,n,r){Hi(t,"update",{path:e.toString(),value:n});let i=!0;const s=Wo(t),o={};if(xe(n,(l,a)=>{i=!1,o[l]=ig(ie(e,l),ce(a),t.serverSyncTree_,s)}),i)Se("update() called with empty data.  Don't do anything."),Va(t,r,"ok",void 0);else{const l=Sc(t),a=zw(t.serverSyncTree_,e,o,l);Bo(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||Ae("update at "+e+" failed: "+u);const f=Bt(t.serverSyncTree_,l,!d),y=f.length>0?gr(t,e):e;tt(t.eventQueue_,y,f),Va(t,r,u,h)}),xe(n,u=>{const h=kc(t,ie(e,u));gr(t,h)}),tt(t.eventQueue_,e,[])}}function SC(t){Hi(t,"onDisconnectEvents");const e=Wo(t),n=io();Fa(t.onDisconnect_,B(),(i,s)=>{const o=ig(i,s,t.serverSyncTree_,e);jm(n,i,o)});let r=[];Fa(n,B(),(i,s)=>{r=r.concat(Bi(t.serverSyncTree_,i,s));const o=kc(t,i);gr(t,o)}),t.onDisconnect_=io(),tt(t.eventQueue_,B(),r)}function EC(t,e,n){let r;M(e._path)===".info"?r=Wa(t.infoSyncTree_,e,n):r=Wa(t.serverSyncTree_,e,n),dg(t.eventQueue_,e._path,r)}function kC(t,e,n){let r;M(e._path)===".info"?r=fo(t.infoSyncTree_,e,n):r=fo(t.serverSyncTree_,e,n),dg(t.eventQueue_,e._path,r)}function xC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fC)}function Hi(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Se(n,...e)}function Va(t,e,n,r){e&&Sr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function fg(t,e,n){return dc(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function Ec(t,e=t.transactionQueueTree_){if(e||Ho(t,e),kr(e)){const n=mg(t,e);E(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&TC(t,Wi(e),n)}else lg(e)&&$o(e,n=>{Ec(t,n)})}function TC(t,e,n){const r=n.map(u=>u.currentWriteId),i=fg(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];E(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Oe(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Hi(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(Bt(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ho(t,vc(t.transactionQueueTree_,e)),Ec(t,t.transactionQueueTree_),tt(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)Sr(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ae("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}gr(t,e)}},o)}function gr(t,e){const n=pg(t,e),r=Wi(n),i=mg(t,n);return IC(t,i,r),r}function IC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Oe(n,a.path);let h=!1,d;if(E(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,i=i.concat(Bt(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=pC)h=!0,d="maxretry",i=i.concat(Bt(t.serverSyncTree_,a.currentWriteId,!0));else{const f=fg(t,a.path,o);a.currentInputSnapshot=f;const y=e[l].update(f.val());if(y!==void 0){Uo("transaction failed: Data returned ",y,a.path);let _=ce(y);typeof y=="object"&&y!=null&&yt(y,".priority")||(_=_.updatePriority(f.getPriority()));const k=a.currentWriteId,m=Wo(t),c=sg(_,f,m);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=c,a.currentWriteId=Sc(t),o.splice(o.indexOf(k),1),i=i.concat(Zm(t.serverSyncTree_,a.path,c,a.currentWriteId,a.applyLocally)),i=i.concat(Bt(t.serverSyncTree_,k,!0))}else h=!0,d="nodata",i=i.concat(Bt(t.serverSyncTree_,a.currentWriteId,!0))}tt(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}Ho(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Sr(r[l]);Ec(t,t.transactionQueueTree_)}function pg(t,e){let n,r=t.transactionQueueTree_;for(n=M(e);n!==null&&kr(r)===void 0;)r=vc(r,n),e=Y(e),n=M(e);return r}function mg(t,e){const n=[];return gg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function gg(t,e,n){const r=kr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);$o(e,i=>{gg(t,i,n)})}function Ho(t,e){const n=kr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,og(e,n.length>0?n:void 0)}$o(e,r=>{Ho(t,r)})}function kc(t,e){const n=Wi(pg(t,e)),r=vc(t.transactionQueueTree_,e);return Zw(r,i=>{Ll(t,i)}),Ll(t,r),ag(r,i=>{Ll(t,i)}),n}function Ll(t,e){const n=kr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(E(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(E(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Bt(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?og(e,void 0):n.length=s+1,tt(t.eventQueue_,Wi(e),i);for(let o=0;o<r.length;o++)Sr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function RC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ae(`Invalid query segment '${n}' in query '${t}'`)}return e}const Th=function(t,e){const n=PC(t),r=n.namespace;n.domain==="firebase.com"&&Dt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Dt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||bv();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Cm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new V(n.pathString)}},PC=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=NC(t.substring(h,d)));const f=RC(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+de(this.snapshot.exportVal())}}class DC{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return F(this._path)?null:Xu(this._path)}get ref(){return new Lt(this._repo,this._path)}get _queryIdentifier(){const e=hh(this._queryParams),n=Ku(e);return n==="{}"?"default":n}get _queryObject(){return hh(this._queryParams)}isEqual(e){if(e=Cr(e),!(e instanceof xc))return!1;const n=this._repo===e._repo,r=Zu(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+v1(this._path)}}class Lt extends xc{constructor(e,n){super(e,n,new rc,!1)}get parent(){const e=Pm(this._path);return e===null?null:new Lt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ni{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new V(e),r=Ga(this.ref,e);return new Ni(this._node.getChild(n),r,se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ni(i,Ga(this.ref,r),se)))}hasChild(e){const n=new V(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vo(t,e){return t=Cr(t),t._checkNotDeleted("ref"),e!==void 0?Ga(t._root,e):t._root}function Ga(t,e){return t=Cr(t),M(t._path)===null?aC("child","path",e):cg("child","path",e),new Lt(t._repo,ie(t._path,e))}function AC(t,e){t=Cr(t),uC("set",t._path),sC("set",e,t._path);const n=new Fi;return wC(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function LC(t,e){lC("update",e,t._path);const n=new Fi;return CC(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function MC(t){t=Cr(t);const e=new yg(()=>{}),n=new Go(e);return vC(t._repo,t,n).then(r=>new Ni(r,new Lt(t._repo,t._path),t._queryParams.getIndex()))}class Go{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new OC("value",this,new Ni(e.snapshotNode,new Lt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new DC(this,e,n):null}matches(e){return e instanceof Go?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function bC(t,e,n,r,i){const s=new yg(n,void 0),o=new Go(s);return EC(t._repo,t,o),()=>kC(t._repo,t,o)}function FC(t,e,n,r){return bC(t,"value",e)}Ow(Lt);bw(Lt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="FIREBASE_DATABASE_EMULATOR_HOST",Qa={};let zC=!1;function $C(t,e,n,r){t.repoInfo_=new Cm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function UC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Dt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Se("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Th(s,i),l=o.repoInfo,a;typeof process<"u"&&Kd&&(a=Kd[jC]),a?(s=`http://${a}?ns=${l.namespace}`,o=Th(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new Qv(t.name,t.options,e);cC("Invalid Firebase Database URL",o),F(o.path)||Dt("Database URL must point to the root of a Firebase Database (not including a child path).");const h=WC(l,t,u,new Gv(t.name,n));return new HC(h,t)}function BC(t,e){const n=Qa[e];(!n||n[t.key]!==t)&&Dt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),xC(t),delete n[t.key]}function WC(t,e,n,r){let i=Qa[e.name];i||(i={},Qa[e.name]=i);let s=i[t.toURLString()];return s&&Dt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new mC(t,zC,n,r),i[t.toURLString()]=s,s}class HC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Lt(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(BC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Dt("Cannot call "+e+" on a deleted database.")}}function VC(t=_v(),e){const n=pv(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=i0("database");r&&GC(n,...r)}return n}function GC(t,e,n,r={}){t=Cr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Dt("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xs(xs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:s0(r.mockUserToken,t.app.options.projectId);s=new xs(o)}$C(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){Pv(yv),Zs(new vi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return UC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),tr(Yd,qd,t),tr(Yd,qd,"esm2017")}Tt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Tt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};QC();const KC={apiKey:"AIzaSyB11N2LyZGyqkxM4IkmNjcGHTll1bqfi5o",authDomain:"gierki-2.firebaseapp.com",databaseURL:"https://gierki-2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gierki-2",storageBucket:"gierki-2.appspot.com",messagingSenderId:"391025211151",appId:"1:391025211151:web:993fe94607a5335f40f07a"},YC=im(KC),Qo=VC(YC),Tc=async(t,e)=>{await AC(Vo(Qo,t),e)},Vi=async(t,e)=>{await LC(Vo(Qo,t),e)},Ic=(t,e,n)=>FC(Vo(Qo,t),e),qC=async t=>await MC(Vo(Qo,t));class A{constructor(e,n,r,i=-1,s=[],o=0){z(this,"index",0);z(this,"buildingCount",0);z(this,"isOff",!1);z(this,"player","");z(this,"players",[]);z(this,"isComplit",!1);this.type=e,this.name=n,this.cost=r,this.street=i,this.buildingRent=s,this.buildingCost=o}get streetColor(){return{street:_g[this.street]??[0,0,0,0],infrastructure:[255,255,191,0],trainStop:[255,102,153,204],start:[0,0,0,0],card:[0,0,0,0],payment:[0,0,0,0],jail:[0,0,0,0],parking:[0,0,0,0],goToJail:[0,0,0,0]}[this.type]}get streetColorRgba(){return Ri(this.streetColor.map(e=>e*.9))}get isDoubleRent(){return this.isComplit&&this.buildingCount==0}get canBeBought(){return this.player==""&&["street","infrastructure","trainStop"].includes(this.type)}get description(){return{street:this.player?`Dziaka ${this.isOff?"zastawiona przez":"naley do"} ${this.player}`:`Dziaka do kupienia za ${this.cost}`,trainStop:this.player?`Przystanek ${this.isOff?"zastawiony przez":"naley do"} ${this.player}`:`Przystanek do kupienia za ${this.cost}`,infrastructure:this.player?`${this.isOff?"Zastawiony przez":"Naley do"} do ${this.player}`:`Do kupienia za ${this.cost}`,start:`We za start: ${this.cost}`,card:"Dobranie karty",payment:`Zapa: ${this.cost}`,jail:"",parking:this.buildingCount>0?`Kwota do zebrania: ${this.buildingCount}`:"",goToJail:"Nie dostajesz za start"}[this.type]}}const _g=[[255,155,55,0],[255,105,205,255],[255,208,85,233],[255,231,143,27],[255,231,27,27],[255,238,255,86],[255,9,139,31],[255,27,69,255]],vg=()=>[new A("start","Start",200),new A("street","Ulica Konopnicka",60,0,[2,10,30,90,160,250],50),new A("card","Kasa spoeczna",0),new A("street","Ulica Stalowa",60,0,[4,20,60,180,320,450],50),new A("payment","Podatek dochodowy",200),new A("trainStop","Dworzec zachodni",200,-1,[25,50,100,200],100),new A("street","Ulica Radzymiska",100,1,[6,30,90,270,400,550],50),new A("card","Szansa",0),new A("street","Ulica Jagieloska",100,1,[6,30,90,270,400,550],50),new A("street","Ulica Targowa",120,1,[8,40,100,300,450,600],50),new A("jail","Wizienie",50),new A("street","Ulica Powiecka",140,2,[10,50,150,450,625,750],100),new A("infrastructure","Elektrowania",150,-1,[4,10]),new A("street","Ulica Marsa",140,2,[10,50,150,450,625,750],100),new A("street","Ulica Grochowska",160,2,[12,60,180,500,700,900],100),new A("trainStop","Dworzec Gdaski",200,-1,[25,50,100,200],100),new A("street","Ulica Obozowa",180,3,[14,70,200,550,750,950],100),new A("card","Kasa spoeczna",0),new A("street","Ulica Grczewska",180,3,[14,70,200,550,750,950],100),new A("street","Ulica Woska",200,3,[16,80,220,600,800,1e3],100),new A("parking","Parking",0),new A("street","Ulica Mickiewicza",220,4,[18,90,250,700,875,1050],150),new A("card","Szansa",0),new A("street","Ulica Sowackiego",220,4,[18,90,250,700,875,1050],150),new A("street","Plac Wilsona",240,4,[20,100,300,750,925,1100],150),new A("trainStop","Dworzec Wschodni",200,-1,[25,50,100,200],100),new A("street","Ulica witokrzystka",260,5,[22,110,330,800,975,1150],150),new A("street","Krakowskie Przedmiecie",260,5,[22,110,330,800,975,1150],150),new A("infrastructure","Wodocigi",150,-1,[4,10]),new A("street","Nowy wiat",280,5,[22,120,360,850,1025,1200],150),new A("goToJail","Id do wizienia",0),new A("street","Plac Trzech Krzyy ",300,6,[26,130,390,900,1100,1275],200),new A("street","Ulica Marszakowska",300,6,[26,130,390,900,1100,1275],200),new A("card","Kasa spoeczna",0),new A("street","Aleje Jerozolimskie",320,6,[28,150,450,1e3,1200,1400],200),new A("trainStop","Dworzec Centralny",200,-1,[25,50,100,200],100),new A("card","Szansa",0),new A("street","Ulica Belwederska",350,7,[35,175,500,1100,1300,1500],200),new A("payment","Domiar podatkowy",100),new A("street","Aleje Ujazdowskie",400,7,[50,200,600,1400,1700,2e3],200)];function JC(t,e,n){const r=vg();if(!Array.isArray(t)||t.length!==r.length)return r;for(let o=0;o<r.length;o++){let l=t[o].split("|");r[o].index=o,r[o].player=e.hasOwnProperty(l[0])&&n.includes(l[0])?l[0]:"",r[o].buildingCount=parseInt(l[1],10),l.length>2&&(r[o].isOff=l[2]==="1")}n.forEach(o=>{r[e[o].position].players.push(o)});for(let o=0;o<_g.length;o++){let l=r.filter(a=>a.type==="street"&&a.street===o);l.length>0&&l[0].player!==""&&l.every(a=>a.player===l[0].player&&!a.isOff)&&l.forEach(a=>{a.isComplit=!0})}let i=r.filter(o=>o.type==="infrastructure"&&o.player!==""&&!o.isOff);i.forEach(o=>{o.buildingCount=i.filter(l=>l.player===o.player).length});let s=r.filter(o=>o.type==="trainStop"&&o.player!==""&&!o.isOff);return s.forEach(o=>{o.buildingCount=s.filter(l=>l.player===o.player).length}),r}function XC(t){return t.map(e=>`${e.player}|${e.buildingCount}`)}function Ri(t){return`rgba(${t[1]}, ${t[2]}, ${t[3]}, ${1*t[0]/255})`}const Ko=[[255,255,255,0],[255,255,0,0],[255,0,102,255],[255,1,168,1],[255,168,1,115],[255,248,113,237]];class ZC{constructor(e,n,r,i,s){this.nick=e,this.position=n,this.colorIndex=r,this.money=i,this.inJailFor=s}get color(){return Ko[this.colorIndex]}get colorRgba(){return Ri(this.color)}get colorRgba2(){return Ri(this.color.map(e=>e*.8))}}const eS=(t,e)=>{if(e.room=="Monopoly"){const n=((e.monopolyColor??0)+1)%Ko.length;Tc(`/lobby/players/${t}/monopolyColor`,n)}},tS=({roomsList:t,players:e,joinRoom:n,startRoom:r,watchRoom:i})=>{const{userName:s}=W.useContext(bi),o=["Poczekalnia",...t.filter(v=>v!=="Poczekalnia")],l=t.reduce((v,k)=>(v[k]={onlinePlayers:{},groups:{},offlinePlayers:{}},v),{}),a=Date.now();Object.entries(e).forEach(([v,k])=>{const m=k.room in l?k.room:"Poczekalnia";a-(k.time||Date.parse("0"))<=36e5||k.gameRoom?k.gameRoom?(l[m].groups[k.gameRoom]||(l[m].groups[k.gameRoom]={}),l[m].groups[k.gameRoom][v]=k):l[m].onlinePlayers[v]=k:l[m].offlinePlayers[v]=k});const u=v=>{const k=Date.now()-(v||Date.parse("0")),m=Math.floor(k/6e4),c=Math.floor(m/60),g=Math.floor(c/24);return m<5?"":m<60?`${m}m`:c<24?`${c}h`:`${g}d`},[h,d]=W.useState({}),f=v=>{d(k=>({...k,[v]:!k[v]}))},y=(v,k)=>{var g,w;const m=Object.values(k).map(S=>S.colorRgba),c=new Set(m).size==m.length;return p.jsxs("div",{className:"room-title",children:[p.jsx("h2",{className:v==((g=k[s])==null?void 0:g.room)?"room-name my-player":"room-name",children:v}),v!==((w=k[s])==null?void 0:w.room)?p.jsx("button",{className:"room-button",onClick:()=>n(v),children:"Docz"}):["Monopoly"].includes(v)?p.jsx("button",{className:"room-button",disabled:!c,onClick:()=>r(v,k),style:{pointerEvents:c?"auto":"none"},children:c?"Rozpocznij":"Musicie mie rne kolory"}):["Poczekalnia",null,"",void 0].includes(v)?null:p.jsx("button",{className:"room-button",disabled:!c,style:{pointerEvents:"none"},children:"Brak wspracia webowego"})]})},_=v=>p.jsx("ul",{className:"player-list",children:Object.entries(v).map(([k,m])=>p.jsxs("li",{className:"player-item",children:[k==s?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"player-color-button",tabIndex:-1,style:{backgroundColor:m.colorRgba,pointerEvents:"auto"},onClick:()=>eS(k,m)}),p.jsx("span",{className:"player-name my-player",children:k})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"player-color-button",tabIndex:-1,style:{backgroundColor:m.colorRgba,pointerEvents:"none"}}),p.jsx("span",{className:"player-name",children:k})]}),p.jsx("span",{className:"player-time",children:u(m.time)})]},k))});return p.jsx("div",{className:"container",children:o.map(v=>{const{groups:k,onlinePlayers:m,offlinePlayers:c}=l[v];return p.jsxs("div",{className:"room-container",children:[y(v,m),Object.keys(m).length>0?p.jsxs("h3",{children:["Gracze online (",Object.keys(m).length,")"]}):null,_(m),Object.keys(k).length>0?p.jsx("h3",{children:"Bierzce rozgrywki:"}):null,Object.entries(k).map(([g,w])=>p.jsxs("div",{className:"game-room-container",children:[p.jsxs("h4",{className:"game-room-title",children:[p.jsxs("span",{className:"game-room-name",children:["#",g]}),["Monopoly"].includes(v)?p.jsx("button",{className:"game-room-button",onClick:()=>i(v,g),children:"Obserwuj"}):null]}),_(w)]},g)),Object.keys(c).length>0&&p.jsxs("div",{className:"offline-toggle",children:[p.jsxs("h3",{onClick:()=>f(v),children:[h[v]?"":""," Gracze offline (",Object.keys(c).length,")"]}),h[v]&&_(c)]})]},v)})})},po=class po{constructor(e="Poczekalnia",n,r,i,s,o,l){this.room=e,this.monopolyColor=n,this.cluedoColor=r,this.color=i,this.time=s,this.version=o,this.gameRoom=l}get colorRgba(){if(this.room=="Monopoly"){const e=Ko[this.monopolyColor??0];return Ri(e)}return Ri([0,0,0,0])}};z(po,"fromJson",e=>new po(e.room||"Poczekalnia",e.monopolyColor||0,e.cluedoColor||0,e.color||0,e.time||0,e.version||"",e.gameRoom||null));let Ka=po;const nS=()=>{const{userName:t}=W.useContext(bi),[e,n]=W.useState(null);if(W.useEffect(()=>{const o=Ic("/lobby",l=>{const a=l.val();n(a)});return()=>{o()}},[]),e==null)return p.jsx(p.Fragment,{children:"adowanie..."});const r=o=>{Tc(`/lobby/players/${t}/room`,o)},i=(o,l)=>{const a=`${Date.now()}`,u={};Object.keys(l).forEach(d=>{u[`/lobby/players/${d}/gameRoom`]=a}),u[`games/rooms/${a}/name`]=o;const h=e.rooms[o];o=="Monopoly"&&rS(a,h,u,l)},s=(o,l)=>{Vi("/",{[`/lobby/players/${t}/room`]:o,[`/lobby/players/${t}/gameRoom`]:l,[`/games/rooms/${l}/playersModel/observers/${t}`]:1})};return p.jsx(tS,{roomsList:Object.keys(e.rooms),players:Object.entries(e.players).reduce((o,[l,a])=>(o[l]=Ka.fromJson(a),o),{}),joinRoom:r,startRoom:i,watchRoom:s})};function rS(t,e,n,r){const i=Array.from({length:Ko.length},(l,a)=>a+1),s=Object.keys(r).reduce((l,a)=>{const u=r[a].monopolyColor??0;return i.splice(i.indexOf(u),1),l[a]={color:u,position:0,money:1500},l},{});if(e.robots==1)s.Robot={color:i.pop(),position:0,money:1500};else for(let l=0;l<e.robots;l++)s[`Robot ${l}`]={color:i.pop(),position:0,money:1500};const o=Object.keys(s).map(l=>({value:l,sort:Math.random()})).sort((l,a)=>l.sort-a.sort).map(({value:l})=>l);n[`games/rooms/${t}/gameModel/cardsRandomSeed`]=Math.floor(Math.random()*1e6),n[`games/rooms/${t}/gameModel/waitingToThrow`]=!0,n[`games/rooms/${t}/gameModel/fields`]=XC(vg()),n[`games/rooms/${t}/playersModel/players`]=s,n[`games/rooms/${t}/playersModel/playersOrder`]=o,n[`games/rooms/${t}/playersModel/round`]=o.find(l=>!l.startsWith("Robot")),Vi("/",n)}const mo=class mo{constructor(e,n,r){this.value=e,this.round=n,this.players=r}};z(mo,"fromJson",e=>e==null?null:new mo((e.players??[]).reduce((n,r)=>Math.max(parseInt(r.split("|")[1]),n),0),e.round??0,(e.players??[]).map(n=>new iS(n.split("|")[0],parseInt(n.split("|")[1]),n.split("|")[2]=="1"))));let Ya=mo;class iS{constructor(e,n,r){this.name=e,this.value=n,this.isPlaying=r}}class U{constructor(e,n=0,r=0,i=0){this.type=e,this.cost=n,this.position=r,this.hotelCost=i}}const Ih=[new U("pay",100),new U("pay",150),new U("pay",200),new U("take",100),new U("take",100),new U("take",120),new U("take",120),new U("take",150),new U("take",150),new U("move",0,3),new U("move",0,15),new U("move",0,21),new U("move",0,30),new U("move",0,31),new U("birthday",20),new U("birthday",50)],Nh=[new U("pay",100),new U("pay",150),new U("pay",200),new U("pay",250),new U("take",100),new U("take",120),new U("take",150),new U("move",0,0),new U("move",0,8),new U("move",0,28),new U("move",0,30),new U("move",0,39),new U("payForBuildings",20,0,50),new U("payForBuildings",20,0,50),new U("payForBuildings",50,0,100),new U("payForBuildings",50,0,100)];function Rh(t,e){function n(s){return function(){let o=s+=1831565813;return o=Math.imul(o^o>>>15,o|1),o^=o+Math.imul(o^o>>>7,o|61),((o^o>>>14)>>>0)/4294967296}}const r=n(t),i=e.slice();for(let s=i.length-1;s>0;s--){const o=Math.floor(r()*(s+1));[i[s],i[o]]=[i[o],i[s]]}return i}class we{constructor(e,n){z(this,"key");z(this,"index",0);z(this,"updates",{});z(this,"add",(e,n=this.nick)=>this.updates[`history/${this.key}-${this.index++}`]=`${n??this.nick}|${e}`);z(this,"commit",async e=>{const n=Object.keys(e);for(let r=0;r<n.length;r++)this.updates[n[r]]=e[n[r]];await Vi(`games/rooms/${this.gameRoom}`,this.updates)});this.nick=e,this.gameRoom=n,this.key=`${Date.now()}-${e}`}}class Pi{constructor(e,n,r,i,s,o,l){z(this,"toJson",e=>({money:this.money,players:`${e}|${this.oponent}`,accepted:`${this.accepted?1:0}|${this.oponentAccepted?1:0}`,fields:`${this.myFields.join(";")}|${this.oponentFields.join(";")}`}));this.key=e,this.oponent=n,this.myFields=r,this.oponentFields=i,this.money=s,this.accepted=o,this.oponentAccepted=l}static fromJson(e,n,r){const i=n.players.split("|"),s=n.fields.split("|").map(u=>u==""?[]:u.split(";").map(h=>parseInt(h))),o=n.accepted.split("|"),l=i.indexOf(r),a=1-l;return l<0?null:new Pi(e,i[a]??"",s[l],s[a],n.money*(l==1?-1:1),o[l]=="1",o[a]=="1")}static basic(){return new Pi("","",[],[],0,!1,!1)}}const go=class go{constructor(e,n,r,i,s,o,l,a,u,h,d,f,y,_,v,k,m,c){z(this,"throwDices",async()=>{const e=new we(this.nick,this.gameRoom);let n=Math.floor(Math.random()*6)+1,r=Math.floor(Math.random()*6)+1,i=n+r;n==r&&(e.add(`${this.nick} rzuci (${n},${r})`),n=Math.floor(Math.random()*6)+1,r=Math.floor(Math.random()*6)+1,i=n+r,n==r&&(e.add(`${this.nick} rzuci (${n},${r})`),n=Math.floor(Math.random()*6)+1,r=Math.floor(Math.random()*6)+1,i=n+r));const s=(this.currPlayer.position+i)%this.fields.length;let o=this.fields[s];if(n==r){e.add(`${this.nick} rzuci (${n},${r}) i idzie do wizienia`),await this.goToJail(e);return}if(o.type=="goToJail"){e.add(`${this.nick} rzuci (${n},${r}) i trafi na policjanta - idzie do wizienia`),await this.goToJail(e);return}const l={"gameModel/waitingToThrow":!1,"gameModel/waitingToBuy":!1,"gameModel/haveToPay":null,"gameModel/canPay":null,[`playersModel/players/${this.round}/position`]:s};if(e.add(`${this.nick} rzuci (${n},${r}) i usta na \`${o.name}\``),l["gameModel/canTakeStart"]=s<this.currPlayer.position||i>=this.fields.length,o.type=="card"){const a=o.name=="Szansa"?Rh(this.cardsRandomSeed,Ih)[this.chanceCardsIndex]:Rh(this.cardsRandomSeed,Nh)[this.socialFundCardsIndex];if(o.name=="Szansa"?l["gameModel/chanceCardsIndex"]=(this.chanceCardsIndex+1)%Ih.length:l["gameModel/socialFundCardsIndex"]=(this.socialFundCardsIndex+1)%Nh.length,a.type=="move"){if(this.fields[a.position].type=="goToJail"){e.add(`${this.nick} dobra kart 'Idziesz do wizienia'`),l["gameModel/canTakeStart"]=!1,await this.goToJail(e);return}e.add(`${this.nick} dobra kart 'Idziesz na \`${this.fields[a.position].name}\`'`),l["gameModel/canTakeStart"]=l["gameModel/canTakeStart"]||a.position<s,l[`playersModel/players/${this.round}/position`]=a.position,o=this.fields[a.position]}else if(a.type=="pay")l["gameModel/haveToPay"]={nick:a.cost},e.add(`${this.nick} dobra kart 'Zapa ${a.cost}'`);else if(a.type=="take")l[`playersModel/players/${this.round}/money`]=this.myPlayer.money+a.cost,e.add(`${this.nick} dobra kart 'Dostajesz ${a.cost}'`);else if(a.type=="payForBuildings"){const u=this.fields.filter(h=>h.player==this.nick&&h.type=="street").reduce((h,d)=>h+d.buildingCount*d.buildingCost,0);l["gameModel/haveToPay"]={nick:u},e.add(`${this.nick} dobra kart 'Zapa ${a.cost} za kady dom i ${a.hotelCost} za kady hotel - razem ${u}`)}else a.type=="birthday"&&(this.playersOrder.filter(u=>u!=this.nick).forEach(u=>{l[`gameModel/haveToPay/${u}`]=a.cost}),e.add(`${this.nick} dobra kart 'Masz urodziny gracze skadaj si dla Ciebie po ${a.cost}'`))}console.log("throwDices",o),o.type=="payment"?l["gameModel/haveToPay"]={nick:o.cost}:o.canBeBought?l["gameModel/waitingToBuy"]=!0:["street","trainStop","infrastructure"].includes(o.type)&&o.player!=""&&o.player!=this.nick?l["gameModel/canPay"]=this.nick:o.type=="parking"&&o.buildingCount>0&&(l[`gameModel/fields/${this.fields.indexOf(o)}`]="|0",l[`playersModel/players/${this.nick}/money`]=this.myPlayer.money+o.buildingCount,e.add(`${this.nick} zebra z parkingu \`${o.buildingCount}\``)),await e.commit(l)});z(this,"goToJail",async e=>{await this.nextRound(e,{[`playersModel/players/${this.nick}/position`]:[...this.fields,...this.fields].indexOf(this.fields.find(n=>n.type=="jail"),this.myPlayer.position)%this.fields.length,[`playersModel/players/${this.nick}/inJailFor`]:3})});z(this,"nextRound",async(e,n)=>{let r=this.playersOrder[(this.playersOrder.indexOf(this.round)+1)%this.playersOrder.length];for(e??(e=new we(this.nick,this.gameRoom)),n??(n={"gameModel/waitingToThrow":!0,"gameModel/waitingToBuy":!1,"gameModel/canTakeStart":!1,"gameModel/haveToPay":null,"gameModel/auction":null});this.players[r].inJailFor>0;)this.players[r].inJailFor--,e.add(`${r} czeka ${3-this.players[r].inJailFor} kolejk w wiziueniu`,r),n[`playersModel/players/${r}/inJailFor`]=this.players[r].inJailFor,r=this.playersOrder[(this.playersOrder.indexOf(r)+1)%this.playersOrder.length];e.add(`${r} rozpoczyna rund`,r),n["playersModel/round"]=r,await e.commit(n)});z(this,"throwOnAuction",async()=>{const e=new we(this.nick,this.gameRoom);e.add(`${this.nick} rozpocz licytacj o \`${this.fields[this.currPlayer.position].name}\``);const n=this.fields[this.currPlayer.position].cost/2;await e.commit({"gameModel/auction/players":this.playersOrder.map(r=>r==this.round?`${r}|${n}|${this.currPlayer.money<n?0:1}`:`${r}|0|${this.players[r].inJailFor==0?1:0}`),"gameModel/auction/round":(this.playersOrder.indexOf(this.round)+1)%this.playersOrder.length})});z(this,"raiceBet",async e=>{const n=new we(this.nick,this.gameRoom);n.add(`${this.nick} podpib cen do ${e}`);let r=(this.auction.round+1)%this.auction.players.length;for(;!this.auction.players[r].isPlaying;)r=(r+1)%this.auction.players.length;await n.commit({[`gameModel/auction/players/${this.auction.round}`]:`${this.nick}|${e}|1`,"gameModel/auction/round":r})});z(this,"buy",async()=>{const e=new we(this.nick,this.gameRoom);e.add(`${this.nick} kupi \`${this.currField.name}\` za ${this.currField.cost}`),await e.commit({"gameModel/auction":null,"gameModel/waitingToBuy":!1,[`gameModel/fields/${this.currPlayer.position}`]:`${this.nick}|0`,[`playersModel/players/${this.nick}/money`]:this.myPlayer.money-this.currField.cost})});z(this,"pass",async()=>{const e=new we(this.nick,this.gameRoom);let n={};this.auction.players[this.auction.round].isPlaying=!1;const r=this.auction.players.filter(i=>i.isPlaying);if(e.add(`${this.nick} spasowa`),r.length==0)n={"gameModel/auction":null,"gameModel/waitingToBuy":!1},e.add("Licytacja zakoczona bez zwyciscy");else if(r.length==1)n={"gameModel/auction":null,"gameModel/waitingToBuy":!1,[`gameModel/fields/${this.currPlayer.position}`]:`${r[0].name}|0`,[`playersModel/players/${r[0].name}/money`]:this.players[r[0].name].money-this.auction.value},e.add(`${r[0].name} wygra licytacj z cen ${this.auction.value}`,r[0].name);else{let i=(this.auction.round+1)%this.auction.players.length;for(;!this.auction.players[i].isPlaying;)i=(i+1)%this.auction.players.length;n={[`gameModel/auction/players/${this.auction.round}`]:`${this.nick}|${this.auction.players[this.auction.round].value}|0`,"gameModel/auction/round":i}}await e.commit(n)});z(this,"pay",async()=>{const e=new we(this.nick,this.gameRoom),n={[`gameModel/haveToPay/${this.nick}`]:null,[`playersModel/players/${this.nick}/money`]:this.myPlayer.money-this.haveToPay[this.nick]};if(this.currField.type=="card")if(this.nick==this.round){e.add(`${this.nick} zapaci ${this.haveToPay[this.nick]}`);const r=this.fields.find(i=>i.type=="parking");n[`gameModel/fields/${this.fields.indexOf(r)}`]=`|${r.buildingCount+this.haveToPay[this.nick]}`}else n[`playersModel/players/${this.round}/money`]=this.currPlayer.money+this.haveToPay[this.nick],e.add(`${this.nick} zapaci ${this.haveToPay[this.nick]} za urodziny ${this.round}`);else{if(this.myField.type=="payment"){const r=this.fields.find(i=>i.type=="parking");n[`gameModel/fields/${this.fields.indexOf(r)}`]=`|${r.buildingCount+this.haveToPay[this.nick]}`}else n[`playersModel/players/${this.myField.player}/money`]=this.players[this.myField.player].money+this.haveToPay[this.nick];e.add(`${this.nick} zapaci ${this.haveToPay[this.nick]} za \`${this.myField.name}\``)}await e.commit(n)});z(this,"demandPayment",async()=>{var s;const e=new we(this.nick,this.gameRoom),n=this.fields[this.players[this.canPay].position];let r=n.cost;const i=(s=this.fields.find(o=>o.players.includes(this.canPay)))==null?void 0:s.name;if(n.type=="street")r=n.buildingRent[n.buildingCount],n.isDoubleRent&&(r*=2),e.add(`${this.nick} upomina si od ${this.canPay} o opat ${r} za \`${i}\``);else if(n.type=="trainStop")r=n.buildingRent[n.buildingCount-1],e.add(`${this.nick} upomina si od ${this.canPay} o opat ${r} za \`${i}\``);else if(n.type=="infrastructure"){const o=Math.floor(Math.random()*6)+1,l=Math.floor(Math.random()*6)+1;r=n.buildingRent[n.buildingCount-1]*(o+l),e.add(`${this.nick} upomina si od ${this.canPay} o opat ${r} za \`${i}\` - ${this.canPay} rzuci (${o},${l})`)}await e.commit({[`gameModel/haveToPay/${this.canPay}`]:r,"gameModel/canPay":null})});z(this,"takeStart",async()=>{const e=new we(this.nick,this.gameRoom);e.add(`${this.nick} wzi ${this.fields[0].cost} za start`),await e.commit({[`playersModel/players/${this.nick}/money`]:this.myPlayer.money+this.fields[0].cost,"gameModel/canTakeStart":!1})});z(this,"turnOfField",async e=>{const n=new we(this.nick,this.gameRoom);n.add(`${this.nick} ${e.isOff?"wykupi":"zastawi"} \`${e.name}\``),await n.commit(e.isOff?{[`playersModel/players/${this.nick}/money`]:this.myPlayer.money-e.cost/2,[`gameModel/fields/${this.fields.indexOf(e)}`]:`${this.nick}|0`}:{[`playersModel/players/${this.nick}/money`]:this.myPlayer.money+e.cost/2,[`gameModel/fields/${this.fields.indexOf(e)}`]:`${this.nick}|0|1`})});z(this,"sellField",async e=>{const n=new we(this.nick,this.gameRoom);n.add(`${this.nick} sprzeda \`${e.name}\``),await n.commit({[`playersModel/players/${this.nick}/money`]:this.myPlayer.money+(e.isOff?e.cost/2:e.cost),[`gameModel/fields/${this.fields.indexOf(e)}`]:"|0"})});z(this,"sellHouse",async e=>{const n=new we(this.nick,this.gameRoom),r=this.fields.filter(i=>i.street==e.street&&i.name!=e.name).sort((i,s)=>s.buildingCount-i.buildingCount);r[0].buildingCount>e.buildingCount&&(e=r[0]),n.add(e.buildingCount==5?`${this.nick} sprzeda hotel na \`${e.name}\``:`${this.nick} sprzeda ${e.buildingCount} dom na \`${e.name}\``),await n.commit({[`playersModel/players/${this.nick}/money`]:this.myPlayer.money+e.buildingCost,[`gameModel/fields/${this.fields.indexOf(e)}`]:`${this.nick}|${e.buildingCount-1}`})});z(this,"buyHouse",async e=>{const n=new we(this.nick,this.gameRoom),r=this.fields.filter(i=>i.street==e.street&&i.name!=e.name).sort((i,s)=>i.buildingCount-s.buildingCount);r[0].buildingCount<e.buildingCount&&(e=r[0]),e.buildingCount==4?n.add(`${this.nick} postawi hotel na \`${e.name}\``):n.add(`${this.nick} postawi ${e.buildingCount+1} dom na \`${e.name}\``),await n.commit({[`playersModel/players/${this.nick}/money`]:this.myPlayer.money-e.buildingCost,[`gameModel/fields/${this.fields.indexOf(e)}`]:`${this.nick}|${e.buildingCount+1}`})});z(this,"postTrade",async e=>{const n=new we(this.nick,this.gameRoom);n.add(`${this.nick} stworzy now ofert dla ${e.oponent}`),await n.commit({[`gameModel/trades/${n.key}`]:e.toJson(this.nick)})});z(this,"updateTrade",async e=>{if(e.accepted&&e.oponentAccepted){const n=new we(this.nick,this.gameRoom),r=e.myFields.map(o=>`\`${this.fields[o].name}\``).join(", "),i=e.oponentFields.map(o=>`\`${this.fields[o].name}\``).join(", ");n.add(`${this.nick} zatwierdzi wymian ${r} za ${i} i ${e.money}`);const s={[`gameModel/trades/${e.key}`]:null,[`playersModel/players/${this.nick}/money`]:this.myPlayer.money-e.money,[`playersModel/players/${e.oponent}/money`]:this.players[e.oponent].money+e.money};e.myFields.forEach(o=>{s[`gameModel/fields/${o}`]=`${e.oponent}|${this.fields[o].buildingCount}`}),e.oponentFields.forEach(o=>{s[`gameModel/fields/${o}`]=`${this.nick}|${this.fields[o].buildingCount}`}),await n.commit(s)}else e.oponentAccepted=!1,await new we(this.nick,this.gameRoom).commit({[`gameModel/trades/${e.key}`]:e.toJson(this.nick)})});z(this,"deleteTrade",async e=>{await new we(this.nick,this.gameRoom).commit({[`gameModel/trades/${e.key}`]:null})});this.gameRoom=e,this.nick=n,this.players=r,this.playersOrder=i,this.observers=s,this.round=o,this.fields=l,this.waitingToThrow=a,this.canTakeStart=u,this.haveToPay=h,this.waitingToBuy=d,this.cardsRandomSeed=f,this.chanceCardsIndex=y,this.socialFundCardsIndex=_,this.canPay=v,this.auction=k,this.history=m,this.trades=c}get myPlayer(){return this.players[this.nick]}get myField(){return this.fields[this.myPlayer.position]}get currPlayer(){return this.players[this.round]}get currField(){return this.fields[this.currPlayer.position]}};z(go,"fromJson",(e,n,r)=>{const i=Object.entries(e.playersModel.players).reduce((s,[o,l])=>(s[o]=new ZC(o,l.position??0,l.color??0,l.money??0,l.inJailFor??0),s),{});return new go(n,r,i,e.playersModel.playersOrder??[],Object.keys(e.playersModel.observers??{}),e.playersModel.round,JC(e.gameModel.fields,i,e.playersModel.playersOrder??[]),e.gameModel.waitingToThrow&&e.playersModel.round==r,e.gameModel.canTakeStart&&e.playersModel.round==r,e.gameModel.haveToPay??{},e.gameModel.waitingToBuy&&e.playersModel.round==r,e.gameModel.cardsRandomSeed,e.gameModel.chanceCardsIndex,e.gameModel.socialFundCardsIndex,e.gameModel.canPay??null,Ya.fromJson(e.gameModel.auction??null),e.history??{},Object.entries(e.trades??{}).reduce((s,[o,l])=>{const a=Pi.fromJson(o,l,r);return a!=null&&(s[o]=a),s},{}))});let qa=go;const sS=({key:t="",color:e="rgba(255,255,255)",...n})=>p.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:p.jsx("path",{fill:e,d:"M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"})},t),oS=({key:t="",color:e="rgba(255,255,255)",...n})=>p.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:p.jsx("path",{fill:e,d:"M48 0C21.5 0 0 21.5 0 48L0 464c0 26.5 21.5 48 48 48l96 0 0-80c0-26.5 21.5-48 48-48s48 21.5 48 48l0 80 96 0c26.5 0 48-21.5 48-48l0-416c0-26.5-21.5-48-48-48L48 0zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm112-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM80 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM272 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"})},t),lS=({items:t,generateField:e,generetePlayerBox:n,genereteButtons:r})=>{const i=W.useRef(null),s=W.useRef(null),[o,l]=W.useState({top:[],bottom:[],none:[]}),a={};W.useEffect(()=>{const h=i.current,d=s.current;if(!(h&&d))return;const f=d.scrollHeight,y=h.clientHeight;if(f<=y)return;let _=0;for(let m=0;m<t.length;m++)_+=d.children[m].clientHeight/3*2+12,t[m].players.forEach(c=>{a[c]=_}),_+=d.children[m].clientHeight/3;const v=()=>{const m={},c={top:[],bottom:[],none:[]};let g=!0;Object.entries(a).forEach(([w,S])=>{const T=[S-d.scrollTop,S-d.scrollTop+f/3,S-d.scrollTop+f*2/3],x=T.filter(P=>P<0).map(P=>-P),R=T.filter(P=>P>=0&&P<=y),G=T.filter(P=>P>y).map(P=>P-y);if(R.length>0)m[w]="none",c[m[w]].push(w);else{const P=x.pop()??f,_e=G[0]??f;m[w]=P<_e?"top":"bottom",c[m[w]].push(w)}g=g&&o[m[w]].includes(w)}),g||l(c)};v();const k=()=>{d.scrollTop<=f/6?d.scrollTop+=f/3:d.scrollTop+y>=f/6*5&&(d.scrollTop-=f/3-y),v()};return k(),d.addEventListener("scroll",k),()=>{d.removeEventListener("scroll",k)}},[o]);const u=[...t,...t,...t];return p.jsxs("div",{ref:i,style:{position:"relative",padding:"10px",height:"100%",width:"100%",display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[p.jsx("div",{ref:s,style:{width:"100%",height:"100%",flex:1,overflowY:"scroll",scrollbarWidth:"none"},children:u.map((h,d)=>e(h,d))}),o.top.length==0?null:p.jsxs("div",{style:{position:"absolute",right:20,top:20,backgroundColor:"#666",borderRadius:10,padding:5,display:"flex",border:"1px solid #444"},children:[o.top.map(n),p.jsx("span",{style:{marginTop:-6,fontSize:20},children:""})]}),o.bottom.length==0?null:p.jsxs("div",{style:{position:"absolute",right:20,bottom:20,backgroundColor:"#666",borderRadius:10,padding:5,display:"flex",border:"1px solid #444"},children:[o.bottom.map(n),p.jsx("span",{style:{marginTop:-4,fontSize:20},children:""})]}),p.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:30},children:r()})]})},aS=({trade:t,gameModel:e,isNew:n,turnOffAction:r})=>{const[i,s]=W.useState(!1),[o,l]=W.useState(!0),a=u=>{const h=e.fields[u];return p.jsxs("div",{style:{background:h.streetColorRgba},children:[p.jsxs("div",{children:[p.jsx("div",{children:h.name}),p.jsxs("div",{children:["Cena bazowa: ",h.cost]})]}),p.jsx("div",{children:h.buildingCount})]})};return p.jsxs("div",{style:{borderRadius:10,border:"3px solid '#494'",boxShadow:"0 0 5px 3px #464, 0 0 5px 4px black",background:"#464",height:"100%",display:"flex",flexDirection:"column",padding:10},children:[p.jsxs("h3",{style:{margin:" 0 0 10px 0",textShadow:"1px 1px 2px black",padding:"15px",borderBottom:"3px solid #242"},children:[i?o?"Dodaj swoje dziaki":`Dodaj dziaki ${t.oponent}`:n?"Nowa oferta wymiany":"Oferta wymiany",!i&&!n?p.jsx("button",{onClick:()=>e.deleteTrade(t),children:"Usu"}):null]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1},children:[i?e.fields.filter(u=>u.player==(o?e.nick:t.oponent)).map(u=>{const h=e.fields.indexOf(u),d=(o?t.myFields:t.oponentFields).includes(h);return p.jsxs("button",{onClick:()=>{d?o?t.myFields=t.myFields.filter(f=>f!=h):t.oponentFields=t.oponentFields.filter(f=>f!=h):o?t.myFields.push(h):t.oponentFields.push(h),n||e.updateTrade(t)},style:{background:u.streetColorRgba},children:[p.jsxs("div",{children:[p.jsx("div",{children:u.name}),p.jsxs("div",{children:["Cena bazowa: ",u.cost]})]}),p.jsx("div",{children:u.buildingCount}),d?"OK":null]},u.index)}):p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"smaller"},children:"Twoje dziaki:"}),t.myFields.map(a),e.fields.every(u=>u.player!=e.nick)?p.jsx("div",{children:"Brak dziaek na wymian"}):t.accepted?p.jsx("button",{children:"Dodaj dziak"}):null,t.accepted?p.jsx("div",{children:"Zaakceptowano"}):null,p.jsx("div",{children:"Kasa"}),p.jsx("div",{children:"Przeciwnik:"}),t.oponent!=""?p.jsx("div",{children:t.oponent}):null,t.oponentAccepted?p.jsx("div",{children:"Zaakceptowano"}):null,t.oponentFields.map(a),e.fields.every(u=>u.player!=t.oponent)?p.jsx("div",{children:"Brak dziaek na wymian"}):t.accepted?t.oponent==""?p.jsxs(p.Fragment,{children:[p.jsx("div",{children:"Wybierz przeciwnika"}),e.playersOrder.filter(u=>u!=e.nick).map(u=>p.jsx("button",{onClick:()=>t.oponent=u,children:u},u))]}):p.jsx("button",{onClick:()=>{s(!0),l(!1)},children:"Dodaj dziak"}):null]}),i?p.jsx("button",{onClick:()=>s(!1),children:"Gotowe"}):n?p.jsx("button",{disabled:!(t.oponent!=""&&(t.money!=0||t.myFields.length>0||t.oponentFields.length>0)),style:{pointerEvents:t.oponent!=""&&(t.money!=0||t.myFields.length>0||t.oponentFields.length>0)?"auto":"none"},onClick:()=>{e.postTrade(t),r()},children:"Udostpnij ofert"}):p.jsx("button",{onClick:()=>{t.accepted=!t.accepted,e.updateTrade(t)},children:t.accepted?"Anuluj akceptacj":"Akceptuj"})]})]})},uS=({gameModel:t,exit:e})=>{const[n,r]=W.useState(-1),[i,s]=W.useState(!0),[o,l]=W.useState(!1),[a,u]=W.useState(null),h=()=>{var w,S,T,x,R,G;const c=(((w=t.auction)==null?void 0:w.value)??0)+Math.max(10,Math.floor((((S=t.auction)==null?void 0:S.value)??0)/100)*10),g={pointerEvents:"none"};if(t.haveToPay.length>0){if(Object.keys(t.haveToPay).includes(t.nick)){const P=t.players[t.nick].money<t.haveToPay[t.nick];return p.jsxs("button",{disabled:P,style:{...P?g:{},margin:"0 auto"},onClick:P?()=>{}:t.pay,children:["Zapa (",t.haveToPay[t.nick],")"]})}}else{if(t.waitingToThrow)return p.jsx("button",{onClick:t.throwDices,style:{margin:"0 auto"},children:"Rzu komi"});if(t.waitingToBuy||t.auction!=null){const P=((x=t.auction)==null?void 0:x.players[(T=t.auction)==null?void 0:T.round].name)??"",_e=!t.playersOrder.some(ve=>t.players[ve].inJailFor==0&&ve!=t.nick),_t=t.players[t.round].money<t.fields[t.players[t.round].position].cost,vt=c>((R=t.players[P])==null?void 0:R.money);return p.jsxs("div",{style:{width:"40vw"},children:[p.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(33, 140, 183, 1) 0%, rgba(33, 139, 183,1) 50%, rgba(33, 149, 183,1) 140%)",boxShadow:"0 0 5px 1px rgba(87, 174, 245, 0.8)",marginBottom:5,fontSize:"smaller",padding:3},children:[p.jsxs("div",{style:{display:"flex"},children:[p.jsx("div",{children:"Do kupienia"}),p.jsx("div",{style:{marginLeft:"auto",textAlign:"right"},children:"Cena bazowa"})]}),p.jsxs("div",{children:[p.jsxs("div",{style:{display:"flex",padding:"2px 0",borderBottom:t.auction?"1px solid white":"none"},children:[p.jsx("div",{style:{fontWeight:"bold",padding:"0 2px",textShadow:"1px 1px 2px black",background:(G=t.fields.find(ve=>ve.name==t.fields[t.players[t.round].position].name))==null?void 0:G.streetColorRgba},children:t.fields[t.players[t.round].position].name}),p.jsx("div",{style:{marginLeft:"auto"},children:t.fields[t.players[t.round].position].cost})]}),t.auction==null?p.jsx("div",{style:{height:5}}):t.auction.players.map(ve=>p.jsxs("div",{style:{display:"flex"},children:[p.jsx("div",{style:{textDecoration:ve.isPlaying?"none":"line-through"},children:ve.name},ve.name),p.jsx("div",{style:{marginLeft:"auto"},children:ve.value})]},ve.name))]})]}),t.auction==null&&t.waitingToBuy?p.jsxs("div",{style:{display:"flex"},children:[p.jsx("button",{disabled:_e,style:_e?g:{},onClick:_e?()=>{}:t.throwOnAuction,children:"Wrzu na licytacj"}),p.jsx("button",{disabled:_t,style:{..._t?g:{},marginLeft:"auto"},onClick:_t?()=>{}:t.buy,children:"Kup"})]}):P==t.nick?p.jsxs("div",{style:{display:"flex"},children:[p.jsx("button",{onClick:t.pass,children:"Pasuj"}),p.jsx("button",{disabled:vt,style:{pointerEvents:vt?"none":"auto",marginLeft:"auto"},onClick:vt?()=>{}:t.auction.players.filter(ve=>ve.isPlaying).length<2?t.buy:()=>t.raiceBet(c),children:t.auction.players.filter(ve=>ve.isPlaying).length<2?"Kup":`Licytuj (${c})`})]}):P!=""?p.jsxs("div",{style:{textAlign:"center",background:"rgba(33, 149, 183,0.4)"},children:["Oczekiwanie na gracza ",t.players[P].nick]}):null]})}else if(t.round==t.nick)return p.jsx("button",{onClick:()=>t.nextRound(),children:"Zakocz kolejk"})}},d=c=>p.jsx("div",{style:{width:"20px",height:"20px",margin:"2px",background:t.players[c].colorRgba,boxShadow:c==t.nick?"0 0 5px 1px black":""}},c),f=(c,g)=>{var w;return p.jsxs("button",{style:{textAlign:"left",width:"100%",borderRadius:3,cursor:"default",padding:"10px",border:"1px solid "+(c.isOff?"#844":"#ccc"),marginBottom:"10px",display:"flex",flexWrap:"wrap",background:c.players.includes(t.round)?"linear-gradient(180deg, rgba(41,43,153,1) 0%, rgba(0,123,255,0.4) 100%)":"rgba(0,123,255,0.1)"},onClick:()=>["street","infrastructure","trainStop"].includes(c.type)?r(g%t.fields.length):null,children:[p.jsxs("div",{style:{display:"flex",width:"100%"},children:[p.jsxs("div",{style:{boxShadow:c.player!=""?`0 0 5px 1px ${t.players[c.player].colorRgba}, 0 0 5px 1px black`:"",background:c.streetColorRgba,textShadow:"1px 1px 2px black",display:"flex",padding:"5px",flexDirection:"column",alignItems:"flexStart"},children:[p.jsx("h4",{style:{margin:0},children:c.name}),c.type=="start"?t.canTakeStart?p.jsx("button",{onClick:t.takeStart,style:{padding:"0 10px",background:"none",fontWeight:"bold"},children:c.description}):p.jsxs("span",{style:{fontSize:"smaller"},children:["Przejcie przez start: ",c.cost]}):t.canPay!=t.nick&&c.players.includes(t.canPay??"")&&t.myPlayer.inJailFor==0?p.jsxs("button",{onClick:t.demandPayment,style:{padding:"0 10px",background:"none",fontWeight:"bold"},children:["daj opaty ",t.canPay]}):p.jsx("span",{style:{fontSize:"smaller"},children:c.description})]}),p.jsx("div",{style:{marginLeft:"auto",display:"flex",maxWidth:"60px",flexWrap:"wrap",paddingLeft:5},children:c.players.map(d)})]}),c.type!="street"&&c.buildingCount>0?null:p.jsx("div",{style:{display:"flex",alignItems:"flexStart",flexWrap:"wrap",marginTop:"5px"},children:c.buildingCount>4?oS({color:((w=t.players[c.player])==null?void 0:w.colorRgba)??"white",display:"flex",width:"40px",height:"40px"}):Array.from({length:c.buildingCount},(S,T)=>T+1).map(S=>{var T;return sS({color:((T=t.players[c.player])==null?void 0:T.colorRgba)??"white",key:`${g}-${S}`,width:"30px",height:"30px",display:"flex"})})})]},g)},y=()=>p.jsxs("div",{style:{borderBottom:"1px solid gray"},children:[p.jsxs("div",{style:{display:"flex",margin:"0 5px"},children:[p.jsx("h4",{style:{margin:"0"},children:"Gracze"}),p.jsx("div",{style:{marginLeft:"auto"},children:"Runda"})]}),t.playersOrder.map(c=>p.jsxs("div",{style:{display:"flex",margin:5,textDecoration:t.nick==c?"underline":"none"},children:[c,p.jsx("div",{style:{marginLeft:"auto"},children:d(c)}),p.jsx("div",{style:{width:"50px",position:"relative"},children:p.jsx("div",{style:{fontSize:30,right:10,top:-13,position:"absolute"},children:t.round==c?"":""})})]},c))]}),_=()=>t.observers.length==0?null:p.jsxs("div",{style:{borderBottom:"1px solid gray"},children:[p.jsx("h5",{style:{margin:"2px 5px 0 5px"},children:"Obserwatorzy"}),t.observers.map(c=>p.jsx("div",{style:{display:"flex",margin:"0 5px 5px 5px",textDecoration:t.nick==c?"underline":"none"},children:c},c))]}),v=()=>Object.entries(t.history).reverse().map(c=>{var g;return p.jsxs("div",{style:{margin:"3px 0px",borderRadius:6,background:`linear-gradient(180deg, ${((g=t.players[c[1].split("|")[0]])==null?void 0:g.colorRgba2)??"#557ba7"} 0%, rgba(0,0,0,0) 200%)`,display:"flex",flexDirection:"column",padding:"0 3px"},children:[p.jsx("div",{children:c[1].split("|")[1].split("`").map((w,S)=>{var T;return p.jsx("span",{style:{display:S%2?"inline-block":"",background:S%2?(T=t.fields.find(x=>x.name==w))==null?void 0:T.streetColorRgba:"",boxShadow:S%2?"0 0 5px 1px black":""},children:w},S)})}),p.jsx("div",{style:{marginLeft:"auto",fontSize:"smaller"},children:new Date(parseInt(c[0].split("-")[0])+36e5).toISOString().split(".")[0].split("T").reverse().join(" ")})]},c[0])}),k=()=>p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>{u(null),l(!0)},style:{margin:"5px 0"},children:"Dodaj now"}),Object.entries(t.trades).map(c=>p.jsxs("button",{onClick:()=>{u(c[0]),l(!0)},style:{margin:"5px",display:"flex",justifyContent:"space-between"},children:[p.jsxs("div",{children:[p.jsx("div",{children:c[1].oponent}),p.jsx("div",{children:c[0].substring(0,c[0].lastIndexOf(":"))})]}),p.jsx("div",{children:c[1].oponentAccepted?"OK":null})]},c[0]))]}),m=()=>{const c=t.fields[n],g=!(c.buildingCount>0),w=!(c.buildingCount<=4&&c.isComplit&&t.currPlayer.money>=c.buildingCost),S=!(c.buildingCount==0||c.type!="street"),T=!(c.isOff&&t.currPlayer.money>=c.cost/2||c.type!="street"||c.buildingCount==0),x={textShadow:"1px 1px 2px black",fontWeight:"bold",color:"white"};return p.jsxs("div",{style:{borderRadius:10,border:`3px solid ${c.isOff?"#944":"rgba(10,23,45,1)"}`,boxShadow:`0 0 5px 3px ${c.isOff?"#944":"rgba(10,23,45,1)"}, 0 0 5px 4px black`,background:"rgba(40,63,105,1)",height:"100%",display:"flex",flexDirection:"column",padding:10},children:[p.jsx("h3",{style:{margin:" 0 0 10px 0",boxShadow:c.player!=""?`0 0 5px 1px ${t.players[c.player].colorRgba}, 0 0 5px 1px black`:"",background:c.streetColorRgba,textShadow:"1px 1px 2px black",padding:"15px"},children:c.name}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1},children:[p.jsxs("div",{style:{fontSize:"smaller"},children:[p.jsxs("div",{style:{display:"flex"},children:[p.jsx("div",{children:"Kwota zakupu / sprzeay "}),p.jsx("div",{style:{marginLeft:"auto"},children:c.cost})]}),p.jsxs("div",{style:{display:"flex"},children:[p.jsx("div",{children:"Kwota zastawienia / wykupienia "}),p.jsx("div",{style:{marginLeft:"auto"},children:c.cost/2})]})]}),p.jsx("div",{style:{color:"gray"},children:c.type=="street"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{display:"flex",...!c.isComplit&&c.player!=""?x:{}},children:[p.jsx("div",{children:"Bez domw"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[0]})]}),p.jsxs("div",{style:{display:"flex",...c.isDoubleRent?x:{}},children:[p.jsx("div",{children:"Bez domw (z ca ulic)"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[0]*2})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==1?x:{}},children:[p.jsx("div",{children:"1 dom"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[1]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==2?x:{}},children:[p.jsx("div",{children:"2 domy"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[2]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==3?x:{}},children:[p.jsx("div",{children:"3 domy"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[3]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==4?x:{}},children:[p.jsx("div",{children:"4 domy"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[4]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==5?x:{}},children:[p.jsx("div",{children:"Hotel"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[5]})]})]}):c.type=="infrastructure"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{display:"flex",...c.buildingCount==1?x:{}},children:[p.jsx("div",{children:"Jeden budynek infrastruktury"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[0]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==2?x:{}},children:[p.jsx("div",{children:"Dwa budynki infrastruktury"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[1]})]})]}):c.type=="trainStop"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{display:"flex",...c.buildingCount==1?x:{}},children:[p.jsx("div",{children:"Jeden przystanek"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[0]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==2?x:{}},children:[p.jsx("div",{children:"Dwa przystanki"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[1]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==3?x:{}},children:[p.jsx("div",{children:"Trzy przystanki"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[2]})]}),p.jsxs("div",{style:{display:"flex",...c.buildingCount==4?x:{}},children:[p.jsx("div",{children:"Cztery przystanki"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingRent[3]})]})]}):null}),c.type=="street"?p.jsxs("div",{style:{display:"flex",fontSize:"smaller"},children:[p.jsx("div",{children:"Koszt nowego domu"}),p.jsx("div",{style:{marginLeft:"auto"},children:c.buildingCost})]}):p.jsx("div",{}),t.round==t.nick&&c.player==t.nick?p.jsxs("div",{children:[c.type!="street"?null:p.jsxs("div",{style:{display:"flex",marginBottom:5},children:[p.jsx("button",{disabled:g,style:{pointerEvents:g?"none":"auto"},onClick:g?()=>{}:()=>t.sellHouse(c),children:"Sprzedaj dom"}),p.jsx("button",{disabled:w,style:{marginLeft:"auto",pointerEvents:w?"none":"auto"},onClick:w?()=>{}:()=>t.buyHouse(c),children:"Postaw dom"})]}),p.jsxs("div",{style:{display:"flex"},children:[p.jsx("button",{disabled:S,style:{pointerEvents:S?"none":"auto"},onClick:S?()=>{}:()=>t.sellField(c),children:"Sprzedaj"}),p.jsx("button",{disabled:T,style:{marginLeft:"auto",pointerEvents:T?"none":"auto"},onClick:S?()=>{}:()=>t.turnOfField(c),children:c.isOff?"Wykup":"Zastaw"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{}),p.jsx("div",{}),p.jsx("div",{}),p.jsx("div",{})]})]})]})};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{height:"100%",position:"absolute",padding:"59px 0 0 0",display:"flex",width:"100%",maxWidth:"900px",left:"50%",transform:"translateX(-50%)"},children:[p.jsx("div",{style:{height:"100%",width:"100%"},children:p.jsx(lS,{items:t.fields,generateField:f,generetePlayerBox:d,genereteButtons:h})}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"50%",height:"100%",borderLeft:"1px solid gray"},children:[y(),_(),p.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,paddingTop:5},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("button",{onClick:()=>s(!0),style:{borderRadius:0,marginLeft:"5px",padding:"0 5px",background:i?"#333":""},children:"Historia"}),p.jsx("button",{onClick:()=>s(!1),style:{borderRadius:0,padding:"0 5px",textAlign:"right",background:i?"":"#333"},children:"Oferty wymiany"})]}),p.jsx("div",{style:{overflow:"auto",flex:1,padding:"0 15px 0 5px",display:"flex",flexDirection:"column",marginBottom:"10px",background:"#333",marginLeft:5},children:i?v():k()})]})]})]}),n>=0?p.jsxs(p.Fragment,{children:[p.jsx("button",{style:{background:"#44444466",position:"absolute",width:"100%",height:"100%",padding:"59px 0 0 0",alignContent:"center",border:"none"},onClick:()=>r(-1)}),p.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",height:"60%",maxWidth:400,minWidth:260,minHeight:400},children:m()})]}):null,o?p.jsxs(p.Fragment,{children:[p.jsx("button",{style:{background:"#44444466",position:"absolute",width:"100%",height:"100%",padding:"59px 0 0 0",alignContent:"center",border:"none"},onClick:()=>l(!1)}),p.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",height:"60%",maxWidth:400},children:p.jsx(aS,{gameModel:t,isNew:a==null,trade:a!=null?t.trades[a]:Pi.basic(),turnOffAction:()=>l(!1)})})]}):null,p.jsxs("div",{style:{width:"100%",display:"flex",padding:10,borderBottom:"1px solid gray",position:"absolute"},children:[p.jsx("h3",{style:{margin:5},children:t.playersOrder.includes(t.nick)?p.jsxs(p.Fragment,{children:["Pienidze : ",t.players[t.nick].money]}):null}),p.jsx("button",{onClick:e,style:{marginLeft:"auto",padding:"5px 10px"},children:"Wyjd"})]})]})},cS=({gameRoom:t})=>{const{userName:e}=W.useContext(bi),[n,r]=W.useState(null),i=()=>{const s={[`/lobby/players/${e}/gameRoom`]:null};if(n.playersOrder.includes(e)){const o=n.playersOrder.filter(l=>l!=e);o.length>0?s[`/games/rooms/${t}/playersModel/playersOrder/`]=o:s[`/games/rooms/${t}`]=null}else s[`/games/rooms/${t}/playersModel/observers/${e}`]=null;Vi("/",s)};return W.useEffect(()=>{const s=Ic(`/games/rooms/${t}`,o=>{const l=o.val();l==null?r(l):r(qa.fromJson(l,t,e))});return()=>{s()}},[]),n==null?p.jsx(p.Fragment,{children:"adowanie..."}):p.jsx(uS,{gameModel:n,exit:i})};let Ph=!1;const dS=()=>{const{userName:t}=W.useContext(bi),[e,n]=W.useState(""),[r,i]=W.useState(null),s=(o=!1)=>{o&&Ph||(Ph=!0,document.hidden||Tc(`/lobby/players/${t}/time`,Date.now()))};return W.useEffect(()=>{const o=Ic(`/lobby/players/${t}/gameRoom`,l=>{const a=`${l.val()??""}`;e!==a&&(a!==""&&qC(`/games/rooms/${a}/name`).then(async u=>{const h=u.val();i(h),h==null&&await Vi("/",{[`/lobby/players/${t}/gameRoom`]:null,[`/games/rooms/${a}`]:null})}),n(a))});return s(!0),()=>{o()}},[e]),e==""?p.jsx(nS,{}):r==null?p.jsx(p.Fragment,{children:"adowanie..."}):r=="Monopoly"?p.jsx(cS,{gameRoom:e}):p.jsxs(p.Fragment,{children:["Gra ",r," nie ma jeszcze wspracia webowego",p.jsx("pre",{style:{textAlign:"left"},children:JSON.stringify(e,null,"	")})]})},hS=({children:t})=>{const[e,n]=W.useState(null),[r,i]=W.useState("");W.useEffect(()=>{const l=mS("userName");l&&n(l)},[]);const s=l=>{n(l),gS("userName",l,365)},o=l=>{l.key==="Enter"&&r.trim()!==""&&s(r.trim())};return e?p.jsx(bi.Provider,{value:{userName:e,setUserName:s},children:t}):p.jsx("div",{style:fS,children:p.jsx("input",{type:"text",placeholder:"Wpisz swoj nazw",value:r,onChange:l=>i(l.target.value),onKeyDown:o,style:pS})})},fS={position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},pS={padding:"10px",fontSize:"16px"};function mS(t){const e=t+"=",n=document.cookie.split(";").map(r=>r.trim());for(let r=0;r<n.length;r++){const i=n[r];if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length))}return null}function gS(t,e,n){let r="";{const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3),r="; expires="+i.toUTCString()}document.cookie=t+"="+encodeURIComponent(e)+r+"; path=/"}function yS(){return p.jsx(hS,{children:p.jsx(dS,{})})}Hp(document.getElementById("root")).render(p.jsx(W.StrictMode,{children:p.jsx(yS,{})}));
